<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
	<head>
		<meta charset="utf-8"/>
		<title>CVE-2021-45046 Log4Shell - Cascade CMS Knowledge Base</title>
		<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
		<link href="https://www.hannonhill.com/cascadecms/latest/_files/images/apple-touch-icon-57x57.png" name="favicon" rel="shortcut icon" type="image/png"/>
		
  <link href="https://www.hannonhill.com/cascadecms/latest/_files/_redesign/style.css" rel="stylesheet"/>
  <link href="https://www.hannonhill.com/cascadecms/latest/_files/_redesign/custom.css" rel="stylesheet"/>
  <link href="https://www.hannonhill.com/cascadecms/latest/_files/lib/prettify/prettify.css" rel="stylesheet"/>
  <link href="https://www.hannonhill.com/cascadecms/latest/_files/_redesign/prism/prism.css" rel="stylesheet" type="text/css"/>
  <link href="https://www.hannonhill.com/cascadecms/latest/_files/_redesign/lib/fonts/fontawesome-all.css" rel="stylesheet"/>
  
  <!-- Preload Font Awesome fonts -->
  <link as="font" crossorigin="anonymous" href="https://www.hannonhill.com/cascadecms/latest/_files/_redesign/lib/fonts/fa-solid-900.woff2" rel="preload" type="font/woff2"/>
  <link as="font" crossorigin="anonymous" href="https://www.hannonhill.com/cascadecms/latest/_files/_redesign/lib/fonts/fa-brands-400.woff2" rel="preload" type="font/woff2"/>

 <!-- Conditional comment for IE 7 -->
<!--[if IE 7]>
   <link rel="stylesheet" href="/_files/lib/bootstrap/font-awesome-ie7.css">
<![endif]-->
<link href="https://customer.cludo.com/css/templates/v2.1/essentials/cludo-search.min.css" rel="stylesheet" type="text/css"/>

		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js" type="text/javascript"></script>
		
<!-- Google Tag Manager -->

<script>
  dataLayer = [];
</script>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-WQQX65');</script>

<!-- End Google Tag Manager -->

<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.10/clipboard.min.js"></script>
<script src="https://www.hannonhill.com/cascadecms/latest/_files/lib/prettify/prettify.js" type="text/javascript"></script>
<script src="https://www.hannonhill.com/cascadecms/latest/_files/lib/prettify/lang-css.js" type="text/javascript"></script>
<script src="https://www.hannonhill.com/cascadecms/latest/_files/lib/prettify/lang-sql.js" type="text/javascript"></script>
<script src="https://www.hannonhill.com/cascadecms/latest/_files/lib/prettify/lang-yaml.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function() { prettyPrint(); });
</script>

		<!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
		<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
		
		<link href="https://www.hannonhill.com/cascadecms/latest/faqs/security/cve-2021-45046-log4shell.html" rel="canonical"/>
		<meta content="bb794f3dc0a800794f16f54d2f7c1d6d" name="id"/>
	</head>
	<body data-spy="scroll" data-target=".release-sidebar">
	    <a class="sr-only sr-only-focusable" href="#main-content">Skip to main content</a>
<a class="sr-only sr-only-focusable" href="#sidebar">Skip to sidebar / page navigation</a>
		<!-- Google Tag Manager (noscript) --><noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-WQQX65" style="display:none;visibility:hidden" width="0"></iframe></noscript><!-- End Google Tag Manager (noscript) -->
		

<nav aria-labelledby="navbar-brand" class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
    <a class="navbar-brand" href="https://www.hannonhill.com/cascadecms/latest/index.html" id="navbar-brand" name="brand"><img alt="Cascade CMS Logo" src="https://www.hannonhill.com/cascadecms/latest/_files/_redesign/_images/kb-logo-new.png"/></a>
    <button aria-controls="navbarCollapse" aria-expanded="false" aria-label="toggle navigation" class="navbar-toggler" data-target="#navbarCollapse" data-toggle="collapse" type="button">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarCollapse">
        <ul class="navbar-nav ml-auto">


        
                
        
            <li class="nav-item"><a class="nav-link" href="https://www.hannonhill.com/cascadecms/latest/releases/index.html">Release Notes</a></li>
    
        
                
        
            <li class="nav-item"><a class="nav-link" href="https://help.hannonhill.com/hc/en-us">Support</a></li>
                </ul>
            <nav>
    <form class="form-inline search-bar" id="cludo-search-form-top" role="search">
        <div class="search-box">
        <input aria-label="Search" autocomplete="off" class="form-control form-control-sm search-input" id="searchBox" name="q" placeholder="Search..." type="search"/>
        <a class="search-btn" href="#" id="cludo-voice-parent" type="button">
            <i class="fa-solid fa-magnifying-glass"></i>
        </a>
        </div>
    </form>
</nav>
        </div>
    </nav>


		<div class="container">
			<div class="content-wrapper">
				



<nav aria-label="breadcrumb">
    <ol class="breadcrumb">

        
               <li class="breadcrumb-item"><a href="https://www.hannonhill.com/cascadecms/latest/index.html">            Home    
    </a></li>
      
        
               <li class="breadcrumb-item"><a href="https://www.hannonhill.com/cascadecms/latest/faqs/index.html">            FAQs    
    </a></li>
      
        
                           <li class="breadcrumb-item"><a href="https://www.hannonhill.com/cascadecms/latest/faqs/security/index.html">            Security    
    </a></li>
           <li aria-current="page" class="breadcrumb-item active">CVE-2021-45046 Log4Shell</li>
             
    </ol>
</nav>
				<div class="row">
					<main class="col-sm-12 col-md-12" id="main-content" role="main">
						
						


<style>
    main{
        display: flex;
        flex-direction: column;
        gap: 1em;
    }
</style>

        <div class="card shadow-big center width" id="expand">
                        <div class="icon-wrapper">
        <i class="fa-solid col-visible-md fa-up-right-and-down-left-from-center" id="iconToggle" onclick="toggleWidthAndIcon()"></i>
    </div>
            <div class="flex">
            <span class="badge badge-danger">Security</span>
        </div>
        <header>
                            <h1>CVE-2021-45046 Log4Shell 
                                        </h1>
                    </header>
      <a name="CVE-2021-45046+Log4Shell"></a>
    
                        
                                                
            <section aria-label="What is CVE-2021-45046 (Log4Shell)?" class="anchor-heading" id="WhatisCVE-2021-45046Log4Shell">
                                        <h2>What is CVE-2021-45046 (Log4Shell)?     <a aria-label="Skip to What is CVE-2021-45046 (Log4Shell)?" href="#WhatisCVE-2021-45046Log4Shell"><i class="fas fa-link icon-anchor-link"></i></a></h2>
                        <p>In summary,</p>
<blockquote cite="https://nvd.nist.gov/vuln/detail/CVE-2021-45046">
<p>It was found that the fix to address CVE-2021-44228 in Apache Log4j 2.15.0 was incomplete in certain non-default configurations. This could allows attackers with control over Thread Context Map (MDC) input data when the logging configuration uses a non-default Pattern Layout with either a Context Lookup (for example, $${ctx:loginId}) or a Thread Context Map pattern (%X, %mdc, or %MDC) to craft malicious input data using a JNDI Lookup pattern resulting in a denial of service (DOS) attack. Log4j 2.15.0 restricts JNDI LDAP lookups to localhost by default. Note that previous mitigations involving configuration such as to set the system property <code>log4j2.noFormatMsgLookup</code> to <code>true</code> do NOT mitigate this specific vulnerability. Log4j 2.16.0 fixes this issue by removing support for message lookup patterns and disabling JNDI functionality by default. This issue can be mitigated in prior releases (&lt;2.16.0) by removing the JndiLookup class from the classpath (example: zip -q -d log4j-core-*.jar org/apache/logging/log4j/core/lookup/JndiLookup.class).</p>
<footer><cite>National Vulnerability Database<br/></cite></footer></blockquote>
                                    </section>
                    
                                                
            <section aria-label="Is Cascade CMS affected by CVE-2021-45046 (Log4Shell)?" class="anchor-heading" id="IsCascadeCMSaffectedbyCVE-2021-45046Log4Shell">
                                        <h2>Is Cascade CMS affected by CVE-2021-45046 (Log4Shell)?     <a aria-label="Skip to Is Cascade CMS affected by CVE-2021-45046 (Log4Shell)?" href="#IsCascadeCMSaffectedbyCVE-2021-45046Log4Shell"><i class="fas fa-link icon-anchor-link"></i></a></h2>
                        <p><a href="https://nvd.nist.gov/vuln/detail/CVE-2021-45046" rel="nofollow noopener noreferrer" target="_blank">CVE-2021-45046</a> does not impact Cascade Cloud as of 3/8/2022&#160;or on-premise Cascade CMS 8.20, because the latest version of Log4j 2.x is in use which disables the affected JNDI functionality by default.&#160;</p>
<p>Note that application logging configuration is not available within the application itself. It could only be customized with direct access to the application server.</p>
<h3>On-premise distributions older than Cascade CMS 8.20</h3>
<p>On-premise distributions of Cascade CMS are also not impacted&#160;<em>by default</em>. We do not make use of the affected <code>JNDI</code> substitution in our distribution. That said, if Cascade CMS on-premise logging has been customized in any way, ensure the affected <code>JNDI</code>&#160;substitution is not being used.</p>
<p><strong>Further mitigation</strong></p>
<p>You can take the additional step of removing the affected class from the log4j jar file. You'll need to do this for each and every upgrade until another solution exists.</p>
<p>To do this:</p>
<ul>
<li>Navigate to <em>tomcat/webapps</em> within the Cascade CMS home directory</li>
<li>You'll need to modify the log4j file not only in the unpacked <em>ROOT</em> directory but also in the bundled <em>ROOT.war</em> if it exists.</li>
<li>For the unpacked version:
<ul>
<li>Navigate to <em>ROOT/WEB-INF/lib</em></li>
<li>With access to the <code>zip</code> tool, you can run:<br/><br/>
<pre><code>$ zip -d log4j-core-*.jar org/apache/logging/log4j/core/lookup/JndiLookup.class<br/>$ deleting: org/apache/logging/log4j/core/lookup/JndiLookup.class</code></pre>
If you don't have access to <code>zip</code>, you'll need to use something like like the <code>jar</code>&#160;or <code>unzip</code> tool to unpack, remove the affected class and repack it.<br/><br/></li>
</ul>
</li>
<li>For the version bundled in the WAR file:
<ul>
<li>Navigate to <em>ROOT/WEB-INF/lib</em></li>
<li>Unpack the WAR file to a temp directory from the <em>webapps</em> directory:<br/><br/>
<pre><code>$ mkdir temp<br/>$ cd temp<br/>$ jar xzf ../ROOT.war</code></pre>
</li>
<li>With access to the <code>zip</code> tool, you can run: <br/><br/>
<pre><code>$ zip -d log4j-core-*.jar org/apache/logging/log4j/core/lookup/JndiLookup.class<br/>$ deleting: org/apache/logging/log4j/core/lookup/JndiLookup.class</code></pre>
If you don't have access to <code>zip</code>, you'll need to use something like like the <code>jar&#160;</code>tool to unpack, remove the affected class and repack it.<br/><br/></li>
<li>Repack the WAR file. From inside the temp directory:<br/><br/>
<pre><code>jar cvf ROOT.war *</code></pre>
</li>
<li>Replace the older one ensuring that you maintain the original as backup. From <em>webapps</em>:<br/><br/>
<pre><code>rm ROOT.war<br/>mv temp/ROOT.war .<br/>rm -rf temp</code></pre>
</li>
</ul>
</li>
<li>Alternatively, if you haven't customized the unpacked WAR file, you can delete the entire <em>ROOT</em> directory, skip the first step and make the modifications to the <em>ROOT.war</em> only.</li>
</ul>
<h3>On-premise distributions older than 8.x</h3>
<p>As was the case for <a href="https://www.hannonhill.com/cascadecms/latest/faqs/security/cve-2021-44228-log4shell.html">CVE-2021-44228</a>, <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-45046" rel="nofollow noopener noreferrer" target="_blank">CVE-2021-45046</a> does not impact on-premise distributions of Cascade CMS older than 8.x because <a href="https://logging.apache.org/log4j/2.x/manual/lookups.html">message lookup substitution</a> is not supported in our use of log4j.</p>
                                    </section>
                                     <a aria-label="Back to top" class="scroll-container" href="#top">
        <span class="scroll-container__icon">↑</span>
    </a>
  
        </div>
            
    <script>
      function toggleWidthAndIcon() {
        var element = document.getElementById("expand");
        var icon = document.getElementById("iconToggle");
    
        // Check if the content is currently full width
        if (element.classList.contains("width-full")) {
          // If yes, switch to "width" and update the icon to "expand"
          element.classList.remove("width-full");
          element.classList.add("width");
          icon.classList.remove('fa-down-left-and-up-right-to-center');
          icon.classList.add('fa-up-right-and-down-left-from-center');
        } else {
          // If not, switch to "width-full" and update the icon to "un-expand"
          element.classList.remove("width");
          element.classList.add("width-full");
          icon.classList.remove('fa-up-right-and-down-left-from-center');
          icon.classList.add('fa-down-left-and-up-right-to-center');
        }
      }
    </script>
    
						
					</main>
				</div>
			</div>
			<footer>
				<div class="footer-wrapper ">
    <div class="cludo-feedback"></div> 
<hr/>
<div class="footer-container">
    <div class="footer-left">
        <img alt="cascade cms icon" class="footer-logo" src="https://www.hannonhill.com/cascadecms/latest/_files/images/apple-touch-icon-57x57.png"/>
        
                <p class="" id="site-copyright">All content <a aria-hidden="true" class="quickedit" href="https://hannonhill.cascadecms.com/entity/open.act?id=bb794f3dc0a800794f16f54d2f7c1d6d&amp;type=page" tabindex="-1" target="_blank">©</a> 2026 <a href="https://www.hannonhill.com/index.html">Hannon Hill</a></p>
        
        
    </div>
    <div class="footer-right">
         <ul>
            <li><a href="https://www.hannonhill.com/about-us/about-hannon-hill.html">About us</a></li>
            <li><a href="https://www.hannonhill.com/about-us/join-our-team/index.html">Careers</a></li>
            <li><a href="https://www.hannonhill.com/documents/index.html">Compliance</a></li>
            <li><a href="https://www.hannonhill.com/resources/index.html">Resources</a></li>
            <li><a href="https://portal.productboard.com/gp4tteft4txh4nde2tnnnybl">Idea Portal</a></li>
            <li><a href="https://www.hannonhill.com/cascadecms/latest/sitemap.html">Site Index</a></li>
            <li><a href="https://github.com/hannonhill">Github</a></li>
        </ul>
    </div>
</div>
</div>
			</footer>
		</div>
		
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"></script>
<script src="https://www.hannonhill.com/cascadecms/latest/_files/_redesign/lib/bootstrap/bootstrap.min.js"></script>
<script src="https://www.hannonhill.com/cascadecms/latest/_files/_redesign/lib/bootstrap/scrollspy.js"></script>
<script src="https://www.hannonhill.com/cascadecms/latest/_files/_redesign/application.js"></script>
<script src="https://www.hannonhill.com/cascadecms/latest/_files/_redesign/prism/prism.js" type="text/javascript"></script>
<script src="https://customer.cludo.com/scripts/bundles/search-script.min.js" type="text/javascript"></script>
<script>
var CludoSearch;
(function () {
    var cludoSettings = {
        customerId: 10001479,
        engineId: 10002755,
        searchUrl: 'https://www.hannonhill.com/cascadecms/latest/search.html',
        language: 'en',
        searchInputs: ['cludo-search-form', 'cludo-search-form-top'],
        hideSearchFilters: true,
        focusOnResultsAfterSearch: true,
        type: 'inline',
        template: 'InlineBasic',
        disableAutocomplete: true,
        <!--enableVoiceSearch: true-->
    };
    CludoSearch = new Cludo(cludoSettings);
    CludoSearch.init();
})();
</script>
<!--Cludo Experiences-->
<script data-cid="10001479" defer="defer" id="cludo-experience-manager" src="https://customer.cludo.com/scripts/bundles/experiences/manager.js"></script>
<!--[if lte IE 9]>
    <script src="https://api.cludo.com/scripts/xdomain.js" slave="https://api.cludo.com/proxy.html" type="text/javascript"></script>
<![endif]-->


		
<script type="text/javascript">
    piAId = '1002';
    piCId = '1003';
    
    (function() {
        function async_load(){
            var s = document.createElement('script'); s.type = 'text/javascript';
            s.src = ('https:' == document.location.protocol ? 'https://pi' : 'http://cdn') + '.pardot.com/pd.js';
            var c = document.getElementsByTagName('script')[0]; c.parentNode.insertBefore(s, c);
        }
        if(window.attachEvent) { window.attachEvent('onload', async_load); }
        else { window.addEventListener('load', async_load, false); }
    })();
</script>
<script type="text/javascript">
  sAId = "1";
  sCId = "4";

  (function() {
    function async_load(){
      var s = document.createElement('script'); s.type = 'text/javascript';
      s.src = (('https:' == document.location.protocol) ? "https://ssl" : "http://cdn") + ".spectate.com/s.js";
      var c = document.getElementsByTagName('script')[0]; c.parentNode.insertBefore(s, c);
    }
    if(window.attachEvent) { window.attachEvent('onload', async_load); }
    else { window.addEventListener('load', async_load, false); }
  })();
</script>


	    <script async="true" src="https://live.clive.cloud/page-views/track/12"></script>
		
	</body>
</html>