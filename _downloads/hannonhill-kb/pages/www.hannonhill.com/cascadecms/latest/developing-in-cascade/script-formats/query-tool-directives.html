<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
	<head>
		<meta charset="utf-8"/>
		<title>Query Tool Directives  - Cascade CMS Knowledge Base</title>
		<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
		<link href="https://www.hannonhill.com/cascadecms/latest/_files/images/apple-touch-icon-57x57.png" name="favicon" rel="shortcut icon" type="image/png"/>
		
  <link href="https://www.hannonhill.com/cascadecms/latest/_files/_redesign/style.css" rel="stylesheet"/>
  <link href="https://www.hannonhill.com/cascadecms/latest/_files/_redesign/custom.css" rel="stylesheet"/>
  <link href="https://www.hannonhill.com/cascadecms/latest/_files/lib/prettify/prettify.css" rel="stylesheet"/>
  <link href="https://www.hannonhill.com/cascadecms/latest/_files/_redesign/prism/prism.css" rel="stylesheet" type="text/css"/>
  <link href="https://www.hannonhill.com/cascadecms/latest/_files/_redesign/lib/fonts/fontawesome-all.css" rel="stylesheet"/>
  
  <!-- Preload Font Awesome fonts -->
  <link as="font" crossorigin="anonymous" href="https://www.hannonhill.com/cascadecms/latest/_files/_redesign/lib/fonts/fa-solid-900.woff2" rel="preload" type="font/woff2"/>
  <link as="font" crossorigin="anonymous" href="https://www.hannonhill.com/cascadecms/latest/_files/_redesign/lib/fonts/fa-brands-400.woff2" rel="preload" type="font/woff2"/>

 <!-- Conditional comment for IE 7 -->
<!--[if IE 7]>
   <link rel="stylesheet" href="/_files/lib/bootstrap/font-awesome-ie7.css">
<![endif]-->
<link href="https://customer.cludo.com/css/templates/v2.1/essentials/cludo-search.min.css" rel="stylesheet" type="text/css"/>

		
		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js" type="text/javascript"></script>
		
<!-- Google Tag Manager -->

<script>
  dataLayer = [];
</script>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-WQQX65');</script>

<!-- End Google Tag Manager -->

<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.10/clipboard.min.js"></script>
<script src="https://www.hannonhill.com/cascadecms/latest/_files/lib/prettify/prettify.js" type="text/javascript"></script>
<script src="https://www.hannonhill.com/cascadecms/latest/_files/lib/prettify/lang-css.js" type="text/javascript"></script>
<script src="https://www.hannonhill.com/cascadecms/latest/_files/lib/prettify/lang-sql.js" type="text/javascript"></script>
<script src="https://www.hannonhill.com/cascadecms/latest/_files/lib/prettify/lang-yaml.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function() { prettyPrint(); });
</script>

		
		<!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
		<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
		
		<link href="https://www.hannonhill.com/cascadecms/latest/developing-in-cascade/script-formats/query-tool-directives.html" rel="canonical"/>
		<meta content="6cec5ca0c0a8002b2ab64e2df52d0fc0" name="id"/>
	</head>
	<body data-spy="scroll" data-target=".release-sidebar">
	    <a class="sr-only sr-only-focusable" href="#main-content">Skip to main content</a>
<a class="sr-only sr-only-focusable" href="#sidebar">Skip to sidebar / page navigation</a>
		<!-- Google Tag Manager (noscript) --><noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-WQQX65" style="display:none;visibility:hidden" width="0"></iframe></noscript><!-- End Google Tag Manager (noscript) -->
		

<nav aria-labelledby="navbar-brand" class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
    <a class="navbar-brand" href="https://www.hannonhill.com/cascadecms/latest/index.html" id="navbar-brand" name="brand"><img alt="Cascade CMS Logo" src="https://www.hannonhill.com/cascadecms/latest/_files/_redesign/_images/kb-logo-new.png"/></a>
    <button aria-controls="navbarCollapse" aria-expanded="false" aria-label="toggle navigation" class="navbar-toggler" data-target="#navbarCollapse" data-toggle="collapse" type="button">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarCollapse">
        <ul class="navbar-nav ml-auto">


        
                
        
            <li class="nav-item"><a class="nav-link" href="https://www.hannonhill.com/cascadecms/latest/releases/index.html">Release Notes</a></li>
    
        
                
        
            <li class="nav-item"><a class="nav-link" href="https://help.hannonhill.com/hc/en-us">Support</a></li>
                </ul>
            <nav>
    <form class="form-inline search-bar" id="cludo-search-form-top" role="search">
        <div class="search-box">
        <input aria-label="Search" autocomplete="off" class="form-control form-control-sm search-input" id="searchBox" name="q" placeholder="Search..." type="search"/>
        <a class="search-btn" href="#" id="cludo-voice-parent" type="button">
            <i class="fa-solid fa-magnifying-glass"></i>
        </a>
        </div>
    </form>
</nav>
        </div>
    </nav>


		
		<div class="container">
			<div class="content-wrapper">
				



<nav aria-label="breadcrumb">
    <ol class="breadcrumb">

        
               <li class="breadcrumb-item"><a href="https://www.hannonhill.com/cascadecms/latest/index.html">            Home    
    </a></li>
      
        
               <li class="breadcrumb-item"><a href="https://www.hannonhill.com/cascadecms/latest/developing-in-cascade/index.html">            Developing in Cascade    
    </a></li>
      
        
                           <li class="breadcrumb-item"><a href="https://www.hannonhill.com/cascadecms/latest/developing-in-cascade/script-formats/index.html">            Formats    
    </a></li>
           <li aria-current="page" class="breadcrumb-item active">Query Tool Directives </li>
             
    </ol>
</nav>
				<div class="row">
					<div class="col-sm-12 col-md-3">
						                                                                        
						<a aria-controls="sidebar" aria-expanded="false" class="btn d-md-none sidebarButton mb-2" data-toggle="collapse" href="#sidebar" role="button">☰</a>
<nav class="sidenav site-footer collapse d-md-block mb-2" id="sidebar">
        <h3>In this Section</h3>
    <ul class="list-unstyled list-group list-group-item mb-2">
                                                                                                                                                                                                                                                                                                                                            <li class="folder-item"><a aria-label="Section Topic" href="https://www.hannonhill.com/cascadecms/latest/developing-in-cascade/script-formats/query-tool-directives.html">Query Tool Directives </a>
                        <ul class="navHighlighter">
                                                                                                <li><a aria-label="Skip to Overview" href="#Overview">Overview</a> </li>
                                                                                                                                <li><a aria-label="Skip to When to use directives" href="#Whentousedirectives">When to use directives</a> </li>
                                                                                                                                <li><a aria-label="Skip to #queryexecute" href="#queryexecute">#queryexecute</a> </li>
                                                                                                                                <li><a aria-label="Skip to #queryfilter" href="#queryfilter">#queryfilter</a> </li>
                                                                                                                                <li><a aria-label="Skip to #querysortvalue" href="#querysortvalue">#querysortvalue</a> </li>
                                                                                                                                <li><a aria-label="Skip to Combining directives " href="#Combiningdirectives">Combining directives </a> </li>
                                                                                                                                <li><a aria-label="Skip to In-depth examples" href="#In-depthexamples">In-depth examples</a> </li>
                                                                                                                                <li><a aria-label="Skip to Migration guide" href="#Migrationguide">Migration guide</a> </li>
                                                                                    </ul>
                    </li>
                                    </ul>
    
        <ul class="list-unstyled list-group list-group-item">
                            <li class="parent-folder"><a href="https://www.hannonhill.com/cascadecms/latest/developing-in-cascade/index.html">Developing in Cascade</a></li>
                                                                                                                                                <li><a href="https://www.hannonhill.com/cascadecms/latest/developing-in-cascade/script-formats/velocity-tools.html">Velocity Tools</a></li>
                                                                <li><a href="https://github.com/hannonhill/Velocity-Cookbook"><i class="fas fa-external-link-alt"> </i> Cascade CMS Velocity Examples</a></li>
                                                                                            <li><a href="https://www.hannonhill.com/cascadecms/latest/developing-in-cascade/script-formats/velocity-best-practices.html">Best practices for performance</a></li>
                                                                <li><a href="https://www.hannonhill.com/cascadecms/latest/developing-in-cascade/script-formats/date-tool-essentials.html">Date Tool Essentials</a></li>
                                                                <li><a href="https://www.hannonhill.com/cascadecms/latest/developing-in-cascade/script-formats/query-tool-directives.html">Query Tool Directives </a></li>
                                    </ul>
</nav>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        // Function to toggle the sidebar's 'show' class based on window width
        function toggleSidebar() {
            var width = window.innerWidth;
            var sidebar = document.getElementById('sidebar');
            if (Math.max(width, 768) === width) { // Assumes 'md' breakpoint is at 768px
                sidebar.classList.add('show');
            } else {
                sidebar.classList.remove('show');
            }
        }

        // Run on initial load
        toggleSidebar();

        // Attach the function to the resize event listener
        window.addEventListener('resize', toggleSidebar);
    });
</script>
						
						
					</div>
					<main class="col-sm-12 col-md-9" id="main-content" role="main">
						
						


<style>
    main{
        display: flex;
        flex-direction: column;
        gap: 1em;
    }
</style>

        <div class="card shadow-big  width" id="expand">
                        <div class="icon-wrapper">
        <i class="fa-solid col-visible-md fa-up-right-and-down-left-from-center" id="iconToggle" onclick="toggleWidthAndIcon()"></i>
    </div>
            <div class="flex">
            <span class="badge badge-danger">Formats</span>
        </div>
        <header>
                            <h1>Query Tool Directives  
                                <span aria-label="Cloud first feature" class="cloud-first" role="img" title="This feature is currently available in Cascade Cloud. Coming to on-premise in a future release.">
            <i aria-hidden="true" class="fa-solid fa-cloud"></i>
            <span aria-hidden="true" class="cloud-first__badge">
                1<span class="cloud-first__sup">st</span>
            </span>
        </span>
                    </h1>
                    </header>
      <a name="Query+Tool+Directives+"></a>
    
                        
                                                
            <section aria-label="Overview" class="anchor-heading" id="Overview">
                                        <h2>Overview     <a aria-label="Skip to Overview" href="#Overview"><i class="fas fa-link icon-anchor-link"></i></a></h2>
                        <p>Introduced in Cascade CMS 8.26, Query Directives are an alternative to the&#160;<code>.execute()</code>&#160;method on the Query API. They process results one asset at a time instead of loading everything into a list, which means they can handle up to&#160;<strong>100,000</strong>&#160;results (compared to the 2,000 limit with&#160;<code>.execute()</code>).</p>
<p>There are three directives:</p>
<ul>
<li><code>#queryexecute</code>&#160;&#8211; iterate over results and output content for each asset</li>
<li><code>#queryfilter</code>&#160;&#8211; apply custom filtering logic before&#160;<code>maxResults()</code>&#160;is applied</li>
<li><code>#querysortvalue</code>&#160;&#8211; define a custom sort value before&#160;<code>maxResults()</code>&#160;is applied</li>
</ul>
<p>All three use the same basic pattern: pass a query object and an asset variable, write your logic in the body, and close with&#160;<code>#end</code>.</p>
<div class="alert alert-success"><strong>Tip</strong>: Use <code>$enabledCustomDirectives</code> to check which custom directives are available in your CMS environment.</div>
                                    </section>
                    
                                                
            <section aria-label="When to use directives" class="anchor-heading" id="Whentousedirectives">
                                        <h2>When to use directives     <a aria-label="Skip to When to use directives" href="#Whentousedirectives"><i class="fas fa-link icon-anchor-link"></i></a></h2>
                        <table class="table table-bordered table-hover"><caption>Quick decision guide: .execute() vs directives</caption>
<thead>
<tr>
<th scope="col">Scenario</th>
<th scope="col">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td>Results under 2,000 with no custom filtering or sorting</td>
<td><code>.execute()</code></td>
</tr>
<tr>
<td>Need more than 2,000 results</td>
<td><code>#queryexecute</code></td>
</tr>
<tr>
<td>Need to filter on values not available via built-in query methods</td>
<td><code>#queryfilter</code></td>
</tr>
<tr>
<td>Need to sort by structured data, dynamic metadata, or computed values</td>
<td><code>#querysortvalue</code></td>
</tr>
<tr>
<td>Under 2,000 results but need custom filtering or sorting</td>
<td><code>#queryfilter</code> / <code>#querysortvalue</code> + <code>.execute()</code></td>
</tr>
<tr>
<td>Large dataset with custom filter + sort + output</td>
<td>All three combined</td>
</tr>
</tbody>
</table>
                                    </section>
                    
                                                
            <section aria-label="#queryexecute" class="anchor-heading" id="queryexecute">
                                        <h2>#queryexecute     <a aria-label="Skip to #queryexecute" href="#queryexecute"><i class="fas fa-link icon-anchor-link"></i></a></h2>
                        <p>Replaces the <code>.execute()</code> + <code>#foreach</code> pattern. The directive iterates over results directly, processing one asset at a time. Supports <code>maxResults()</code> up to <strong>100,000</strong>.</p>
<table class="table table-bordered table-hover"><caption>Available arguments for #queryexecute.</caption>
<thead>
<tr>
<th scope="col">Argument</th>
<th scope="col">Type</th>
<th scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>query</td>
<td>SearchQuery<br/>required</td>
<td>A query object.</td>
</tr>
<tr>
<td>asset</td>
<td>Object<br/>required</td>
<td>Populated automatically by the system. Points to a new asset on each iteration, while the old asset gets cleared to save memory.</td>
</tr>
<tr>
<td><em>body</em></td>
<td>Logic<br/>required</td>
<td>Logic to execute and output for each asset.</td>
</tr>
</tbody>
</table>
<div class="alert alert-warning"><strong>Important</strong>: Unlike <code>#foreach</code>, this directive clears the previous asset from memory on each iteration. This means <code>$foreach.count</code>, <code>$foreach.hasNext</code>, <code>$foreach.index</code>, and other loop variables are <strong>not available</strong>. If you need a counter or first-iteration check, manage it yourself with a <code>#set</code> variable.</div>
<h3>Basic usage</h3>
<p>Build a query, then pass it to <code>#queryexecute</code> instead of calling <code>.execute()</code>.</p>
<pre><code>## Build the query (do NOT call .execute())
#set ($query = $_.query().byContentType("Article").maxResults(10).sortBy("startDate").sortDirection("desc"))

## Iterate with the directive
#queryexecute($query, $page)
  &lt;h3&gt;$page.metadata.title&lt;/h3&gt;
  &lt;p&gt;$page.metadata.summary&lt;/p&gt;
#end</code></pre>
<h3>Sitemap generation</h3>
<p>Query directives are well suited for sitemaps where the result set can be very large.</p>
<pre><code>#set ($query = $_.query().byContentType("Default-Page").indexableOnly(true).preloadDynamicMetadata())
&lt;urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"&gt;
  #queryexecute($query, $page)
    &lt;url&gt;
      &lt;loc&gt;https://yoursite.com${page.path}.html&lt;/loc&gt;
    &lt;/url&gt;
  #end
&lt;/urlset&gt;</code></pre>
<h3>Large datasets with preloaded data</h3>
<p>When working with structured data across many results, preload it on the query to avoid per-asset database round trips.</p>
<pre><code>#set ($query = $_.query().byContentType("Event").preloadStructuredData().maxResults(5000).sortBy("startDate").sortDirection("asc"))

#queryexecute($query, $event)
  #set ($start = $event.getStructuredDataNode("startDateTime").textValue)
  #set ($title = $event.metadata.title)
  &lt;div class="event-card"&gt;
    &lt;h3&gt;$title&lt;/h3&gt;
    &lt;span&gt;$start&lt;/span&gt;
  &lt;/div&gt;
#end</code></pre>
<h3>Cross-site query</h3>
<p>Query across all sites for assets using a shared Content Type.</p>
<pre><code>#set ($query = $_.query().byContentType("site://Global/Shared Page").searchAcrossAllSites().preloadDynamicMetadata().maxResults(10000))

#queryexecute($query, $page)
  &lt;li&gt;
    &lt;a href="${page.link}"&gt;${page.metadata.title}&lt;/a&gt;
    &lt;small&gt;(${page.siteName})&lt;/small&gt;
  &lt;/li&gt;
#end</code></pre>
<h3>JSON feed</h3>
<p>Since loop variables aren't available, use a flag variable like <code>$isFirstIteration</code> for comma separation in JSON output.</p>
<pre><code>#set($query = $_.query().byContentType("Event").preloadStructuredData().sortBy("startDate"))
#set($isFirstIteration = true)

[
#queryexecute($query, $event)
    #if(!$isFirstIteration),#end
    #set($title = $_EscapeTool.java($event.metadata.title.trim()))
    #set($date  = $event.getStructuredDataNode("event-date").textValue)
    {
        "title": "${title}",
        "date":  "${date}",
        "url":   ""
    }
    #set($isFirstIteration = false)
#end
]</code></pre>
<p>The key pattern: <code>#if(!$isFirstIteration),#end</code> outputs a comma before every entry except the first, replacing what you'd normally do with <code>$foreach.hasNext</code>.</p>
                                    </section>
                    
                                                
            <section aria-label="#queryfilter" class="anchor-heading" id="queryfilter">
                                        <h2>#queryfilter     <a aria-label="Skip to #queryfilter" href="#queryfilter"><i class="fas fa-link icon-anchor-link"></i></a></h2>
                        <p>Executes body logic on each asset matching a query <em>before</em> <code>maxResults()</code> is applied. If the body logic returns <code>true</code>, the asset is included in the results.</p>
<table class="table table-bordered table-hover"><caption>Available arguments for #queryfilter.</caption>
<thead>
<tr>
<th scope="col">Argument</th>
<th scope="col">Type</th>
<th scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>query</td>
<td>SearchQuery<br/>required</td>
<td>A query object.</td>
</tr>
<tr>
<td>asset</td>
<td>Object<br/>required</td>
<td>Populated automatically by the system. Points to a new asset on each iteration, while the old asset gets cleared to save memory.</td>
</tr>
<tr>
<td><em>body</em></td>
<td>Logic<br/>required</td>
<td>Logic to execute. Must return the exact string <code>true</code> to include the asset.</td>
</tr>
</tbody>
</table>
<div class="alert alert-warning"><strong>Note</strong>: Built-in filtering methods result in faster performance and this directive should only be used for scenarios where there is no built-in method. For example, <code>.bySiteName</code> will be faster than using <code>#queryfilter</code> with Site name comparison logic.</div>
<div class="alert alert-success"><strong>Tip</strong>: You can move your logic into <code>#queryexecute</code> temporarily to test the functionality and ensure that your body logic returns the exact string <code>true</code>.</div>
<div class="alert alert-success"><strong>Tip</strong>: The preferred way to return a value from the filter body is to use <code>#set</code> to capture the result, then output it:
<pre style="margin-top: 0.5rem; margin-bottom: 0;"><code>#queryfilter($query, $asset)
  #set($result = $asset.path.contains("index"))
  $result
#end</code></pre>
This pattern handles negation and multiple conditions cleanly without needing <code>#if</code>/<code>true</code>/<code>#end</code>.</div>
<h3>Filter by path pattern</h3>
<p>Only include index pages from the query results.</p>
<pre><code>#set ($query = $_.query().byContentType("Article"))

#queryfilter($query, $asset)
  $asset.path.contains("index")
#end

#queryexecute($query, $page)
  &lt;li&gt;${page.metadata.title}&lt;/li&gt;
#end</code></pre>
<h3>Filter by structured data value</h3>
<p>Include only assets where a structured data checkbox has a specific value. This is useful for multi-value fields where built-in methods can't filter directly.</p>
<pre><code>#set ($query = $_.query().byContentType("News").preloadStructuredData())

#queryfilter($query, $asset)
  $asset.getStructuredDataNode("details/is-featured").textValue.contains("Yes")
#end

#queryexecute($query, $page)
  &lt;div class="featured-news"&gt;
    &lt;h3&gt;${page.metadata.title}&lt;/h3&gt;
    &lt;p&gt;${page.metadata.summary}&lt;/p&gt;
  &lt;/div&gt;
#end</code></pre>
<h3>Filter by dynamic metadata</h3>
<p>Include only assets where a dynamic metadata field matches a condition.</p>
<pre><code>#set ($query = $_.query().byContentType("Page").preloadDynamicMetadata())

#queryfilter($query, $asset)
  $asset.metadata.getDynamicField("display-in-nav").value.contains("Yes")
#end

#queryexecute($query, $page)
  &lt;li&gt;&lt;a href="${page.link}"&gt;${page.metadata.displayName}&lt;/a&gt;&lt;/li&gt;
#end</code></pre>
<h3>Filter by empty or populated field</h3>
<p>Use <code>$_PropertyTool.isNotEmpty()</code> to include only assets where a field has a value. Negate it to find assets where a field is empty.</p>
<pre><code>## Only pages where the author field is populated
#set ($query = $_.query().byContentType("Article"))

#queryfilter($query, $asset)
  $_PropertyTool.isNotEmpty($asset.metadata.author)
#end

#queryexecute($query, $page)
  &lt;li&gt;${page.metadata.title} &amp;mdash; ${page.metadata.author}&lt;/li&gt;
#end</code></pre>
<p>To find assets where a field is <em>empty</em>, negate the check with <code>#set</code>:</p>
<pre><code>#queryfilter($query, $asset)
  #set($result = !$_PropertyTool.isNotEmpty($asset.metadata.author))
  $result
#end</code></pre>
<h3>Multiple conditions</h3>
<p>Use <code>#set</code> to combine conditions with <code>&amp;&amp;</code> or <code>||</code>. The result is captured as a boolean and output directly.</p>
<pre><code>#set ($query = $_.query().byContentType("Article").preloadStructuredData())

#queryfilter($query, $asset)
  #set($result = $asset.path.contains("index") &amp;&amp; $asset.getStructuredDataNode("details/is-featured").textValue.contains("Yes"))
  $result
#end

#queryexecute($query, $page)
  &lt;li&gt;${page.metadata.title}&lt;/li&gt;
#end</code></pre>
<p>OR logic works the same way:</p>
<pre><code>#queryfilter($query, $asset)
  #set($result = $asset.metadata.title.contains("News") || $asset.metadata.title.contains("Events"))
  $result
#end</code></pre>
<h3>Exclude pattern</h3>
<p>To exclude assets matching a condition, negate the check.</p>
<pre><code>#set ($query = $_.query().byContentType("Article"))

#queryfilter($query, $asset)
  #set($result = !$asset.path.contains("/archive/"))
  $result
#end

#queryexecute($query, $page)
  &lt;li&gt;${page.metadata.title}&lt;/li&gt;
#end</code></pre>
                                    </section>
                    
                                                
            <section aria-label="#querysortvalue" class="anchor-heading" id="querysortvalue">
                                        <h2>#querysortvalue     <a aria-label="Skip to #querysortvalue" href="#querysortvalue"><i class="fas fa-link icon-anchor-link"></i></a></h2>
                        <p>Executes body logic on each asset to determine the sort value <em>before</em> <code>maxResults()</code> is applied. This is an alternative to <code>.sortBy()</code> and can be used with both <code>#queryexecute</code> and <code>.execute()</code>.</p>
<table class="table table-bordered table-hover"><caption>Available arguments for #querysortvalue.</caption>
<thead>
<tr>
<th scope="col">Argument</th>
<th scope="col">Type</th>
<th scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>query</td>
<td>SearchQuery<br/>required</td>
<td>A query object.</td>
</tr>
<tr>
<td>asset</td>
<td>Object<br/>required</td>
<td>Populated automatically by the system. Points to a new asset on each iteration, while the old asset gets cleared to save memory.</td>
</tr>
<tr>
<td><em>body</em></td>
<td>Logic<br/>required</td>
<td>Logic to execute. The return value is used as the sort key.</td>
</tr>
</tbody>
</table>
<div class="alert alert-warning"><strong>Note</strong>: Built-in sorting methods result in faster performance. For example, <code>.sortBy("name")</code> will be faster than using <code>#querysortvalue</code> with <code>$asset.name</code> as the logic.</div>
<div class="alert alert-success"><strong>Tips</strong>:
<ul>
<li>This directive sorts by <strong>string</strong> only. When sorting numbers, use <code>$_NumberTool.withPadding</code> to ensure results sort correctly.</li>
<li>This directive respects the value passed into <code>.sortDirection()</code> on the query.</li>
</ul>
</div>
<h3>Sort by metadata title</h3>
<pre><code>#set ($query = $_.query().byContentType("Article"))

#querysortvalue($query, $asset)
  $asset.metadata.title
#end

#queryexecute($query, $page)
  &lt;li&gt;${page.metadata.title}&lt;/li&gt;
#end</code></pre>
<h3>Sort by structured data text field</h3>
<p>Sort by a text value stored in structured data rather than a metadata field.</p>
<pre><code>#set ($query = $_.query().byContentType("Article").preloadStructuredData().sortDirection("asc"))

#querysortvalue($query, $asset)
  $asset.getStructuredDataNode("title").textValue
#end

#queryexecute($query, $page)
  &lt;li&gt;${page.getStructuredDataNode("title").textValue}&lt;/li&gt;
#end</code></pre>
<h3>Numeric sorting with $_NumberTool.withPadding</h3>
<p>Since <code>#querysortvalue</code> sorts by string, numeric values need padding to sort correctly (e.g., "5" would sort after "10" without padding).</p>
<pre><code>#set ($query = $_.query().byContentType("Course").preloadStructuredData().sortDirection("asc"))

#querysortvalue($query, $asset)
  $_NumberTool.withPadding($asset.getStructuredDataNode("course-number").textValue)
#end

#queryexecute($query, $course)
  &lt;li&gt;${course.getStructuredDataNode("course-number").textValue} - ${course.metadata.title}&lt;/li&gt;
#end</code></pre>
<h3>Multi-level sorting</h3>
<p>Since sorting is string-based, you can concatenate multiple values to sort by more than one field. The first value acts as the primary sort, the second as the tiebreaker, and so on.</p>
<h4>Alphabetical by last name, then first name</h4>
<pre><code>#set ($query = $_.query().byContentType("Staff").preloadStructuredData().sortDirection("asc"))

#querysortvalue($query, $asset)
  $asset.getStructuredDataNode("last-name").textValue $asset.getStructuredDataNode("first-name").textValue
#end

#queryexecute($query, $person)
  &lt;li&gt;${person.getStructuredDataNode("last-name").textValue}, ${person.getStructuredDataNode("first-name").textValue}&lt;/li&gt;
#end</code></pre>
<h4>By department number, then course name</h4>
<pre><code>#set ($query = $_.query().byContentType("Course").preloadStructuredData().sortDirection("asc"))

#querysortvalue($query, $asset)
  $_NumberTool.withPadding($asset.getStructuredDataNode("department-number").textValue) $asset.metadata.title
#end

#queryexecute($query, $course)
  &lt;li&gt;${course.getStructuredDataNode("department-number").textValue} - ${course.metadata.title}&lt;/li&gt;
#end</code></pre>
<p>Note the <code>$_NumberTool.withPadding</code> on the department number. Without it, department "5" would sort after "10" since it's comparing strings.</p>
<h4>By author, then title</h4>
<pre><code>#set ($query = $_.query().byContentType("Article").sortDirection("asc").maxResults(50))

#querysortvalue($query, $asset)
  $asset.metadata.author $asset.metadata.title
#end

#queryexecute($query, $page)
  &lt;li&gt;${page.metadata.author} &amp;mdash; ${page.metadata.title}&lt;/li&gt;
#end</code></pre>
<h3>Sort by date stored in structured data</h3>
<p>Date strings like <code>01-15-2024 02:30:00 PM</code> won't sort chronologically as plain strings because the month comes first. Convert the value to epoch milliseconds with <code>$_DateTool</code> so the sort is truly chronological.</p>
<pre><code>#set ($query = $_.query().byContentType("Event").preloadStructuredData().sortDirection("desc").maxResults(20))

#querysortvalue($query, $asset)
  #set ($dt = $asset.getStructuredDataNode("event-date").textValue)
  #if($_PropertyTool.isNotEmpty($dt))
    #set ($date = $_DateTool.toDate("MM-dd-yyyy hh:mm:ss a", $dt))
    ${date.getTime()}
  #else
    0
  #end
#end

#queryexecute($query, $event)
  &lt;li&gt;
    ${event.metadata.title}
    &lt;span&gt;${event.getStructuredDataNode("event-date").textValue}&lt;/span&gt;
  &lt;/li&gt;
#end</code></pre>
<p>The format string passed to <code>$_DateTool.toDate()</code> must match the format stored in your data definition. Adjust it to match your field's format.</p>
<h3>Sort descending</h3>
<p>The directive respects <code>.sortDirection()</code>. Set it on the query object before using <code>#querysortvalue</code>.</p>
<pre><code>#set ($query = $_.query().byContentType("News").sortDirection("desc"))

#querysortvalue($query, $asset)
  $asset.metadata.title
#end

#queryexecute($query, $page)
  &lt;li&gt;${page.metadata.title}&lt;/li&gt;
#end</code></pre>
                                    </section>
                    
                                                
            <section aria-label="Combining directives " class="anchor-heading" id="Combiningdirectives">
                                        <h2>Combining directives      <a aria-label="Skip to Combining directives " href="#Combiningdirectives"><i class="fas fa-link icon-anchor-link"></i></a></h2>
                        <section aria-label="Combining directives" class="anchor-heading" id="CombiningDirectives">
<p>All three directives can be used together on the same query. The order of operations is: <code>#queryfilter</code> runs first to narrow the results, then <code>#querysortvalue</code> determines the sort order, and finally <code>#queryexecute</code> outputs the results up to the <code>maxResults()</code> limit.</p>
<h3>Full example: filtered, sorted event listing</h3>
<p>Query all events, filter to only featured ones, sort by a structured data date field, and output the first 50.</p>
<pre><code>## Build the query
#set ($query = $_.query().byContentType("Event").preloadStructuredData().sortDirection("asc").maxResults(50))

## Filter: only featured events
#queryfilter($query, $asset)
  $asset.getStructuredDataNode("is-featured").textValue.contains("Yes")
#end

## Sort: by event date stored in structured data
#querysortvalue($query, $asset)
  $asset.getStructuredDataNode("event-date").textValue
#end

## Output
&lt;ul&gt;
#queryexecute($query, $event)
  &lt;li&gt;
    &lt;strong&gt;${event.metadata.title}&lt;/strong&gt;
    &lt;span&gt;${event.getStructuredDataNode("event-date").textValue}&lt;/span&gt;
  &lt;/li&gt;
#end
&lt;/ul&gt;</code></pre>
<h3>Date range filter with chronological sorting</h3>
<p>Filter to events within a specific date range and sort them chronologically. The filter parses each date into epoch milliseconds for comparison, and the sort does the same for ordering.</p>
<pre><code>#set ($query = $_.query().byContentType("Event").preloadStructuredData().sortDirection("asc").maxResults(100))
#set ($rangeStart = $_DateTool.toDate("yyyy-MM-dd", "2024-01-01").getTime())
#set ($rangeEnd = $_DateTool.toDate("yyyy-MM-dd", "2024-12-31").getTime())

## Filter: only events in 2024
#queryfilter($query, $asset)
  #set ($dt = $asset.getStructuredDataNode("event-date").textValue)
  #if($_PropertyTool.isNotEmpty($dt))
    #set ($ts = $_DateTool.toDate("MM-dd-yyyy hh:mm:ss a", $dt).getTime())
    #if($ts &gt;= $rangeStart &amp;&amp; $ts &lt;= $rangeEnd)
      true
    #end
  #end
#end

## Sort: chronological by event date
#querysortvalue($query, $asset)
  #set ($dt = $asset.getStructuredDataNode("event-date").textValue)
  #if($_PropertyTool.isNotEmpty($dt))
    #set ($date = $_DateTool.toDate("MM-dd-yyyy hh:mm:ss a", $dt))
    ${date.getTime()}
  #else
    0
  #end
#end

## Output with formatted date
#queryexecute($query, $event)
  #set ($dt = $event.getStructuredDataNode("event-date").textValue)
  #set ($date = $_DateTool.toDate("MM-dd-yyyy hh:mm:ss a", $dt))
  #set ($formatted = $_DateTool.format("MMMM d, yyyy", $date))
  &lt;li&gt;
    &lt;strong&gt;${event.metadata.title}&lt;/strong&gt;
    &lt;span&gt;$formatted&lt;/span&gt;
  &lt;/li&gt;
#end</code></pre>
</section>
                                    </section>
                    
                                                
            <section aria-label="In-depth examples" class="anchor-heading" id="In-depthexamples">
                                        <h2>In-depth examples     <a aria-label="Skip to In-depth examples" href="#In-depthexamples"><i class="fas fa-link icon-anchor-link"></i></a></h2>
                        <section aria-label="In-depth examples" class="anchor-heading" id="InDepthExamples">
<p>These examples demonstrate advanced patterns that build on the basics above. They reference a Content Type with the following fields. Adapt the content type path and field names to match your own setup.</p>
<ul>
<li><strong>Structured data</strong>: <code>title</code> (text), <code>event-date</code> (datetime in <code>MM-dd-yyyy hh:mm:ss a</code> format), <code>asset-chooser</code> (page chooser)</li>
<li><strong>Dynamic metadata</strong>: <code>multiselect</code> (multi-select), <code>checkbox</code> (checkbox), <code>department</code> (dropdown), <code>radio</code> (radio), <code>noindex</code> (radio)</li>
<li><strong>Standard metadata</strong>: title, author, displayName, summary, description, teaser, keywords, startDate, endDate</li>
</ul>
<h3>Filtering</h3>
<details class="accordion" open=""> <summary>Filter by all values in a multi-select field</summary>
<div class="accordion-inner">
<p>Check that a multi-value field contains every expected value using multiple <code>.contains()</code> calls joined with <code>&amp;&amp;</code>.</p>
<pre><code>#set ($query = $_.query().byContentType("Article").preloadDynamicMetadata().maxResults(-1))

#queryfilter($query, $asset)
  #set ($cb = $asset.metadata.getDynamicField("checkbox").value)
  #set($result = $cb.contains("Easy") &amp;&amp; $cb.contains("Fast") &amp;&amp; $cb.contains("Cheap"))
  $result
#end

#queryexecute($query, $page)
  &lt;li&gt;${page.metadata.title}&lt;/li&gt;
#end</code></pre>
</div>
</details> <details class="accordion"> <summary>Combine structured data, dynamic metadata, and standard metadata</summary>
<div class="accordion-inner">
<p>Filter using fields from three different sources in one condition. Preload both structured data and dynamic metadata on the query.</p>
<pre><code>#set ($query = $_.query().byContentType("Article").preloadStructuredData().preloadDynamicMetadata().maxResults(-1))

#queryfilter($query, $asset)
  #set($result = $_PropertyTool.isNotEmpty($asset.getStructuredDataNode("event-date").textValue) &amp;&amp; $asset.metadata.getDynamicField("checkbox").value.contains("Easy") &amp;&amp; $asset.getStructuredDataNode("title").textValue.contains("Guide"))
  $result
#end

#queryexecute($query, $page)
  &lt;li&gt;${page.getStructuredDataNode("title").textValue}&lt;/li&gt;
#end</code></pre>
</div>
</details>
<h3>Sorting</h3>
<details class="accordion"> <summary>Sort by field value, then by date chronologically</summary>
<div class="accordion-inner">
<p>Concatenate a text field with epoch milliseconds for a two-level sort. The text field acts as the primary sort, and the date as the tiebreaker.</p>
<pre><code>#set ($query = $_.query().byContentType("Event").preloadStructuredData().preloadDynamicMetadata().sortDirection("asc").maxResults(30))

#querysortvalue($query, $asset)
  #set ($group = $asset.metadata.getDynamicField("department").value)
  #set ($dt = $asset.getStructuredDataNode("event-date").textValue)
  #if($_PropertyTool.isNotEmpty($dt))
    #set ($date = $_DateTool.toDate("MM-dd-yyyy hh:mm:ss a", $dt))
    ${group} ${date.getTime()}
  #else
    ${group} 0
  #end
#end

#queryexecute($query, $page)
  &lt;li&gt;${page.metadata.getDynamicField("department").value} &amp;mdash; ${page.metadata.title}&lt;/li&gt;
#end</code></pre>
</div>
</details>
<h3>Combined</h3>
<details class="accordion"> <summary>Most recent pages in a filtered category</summary>
<div class="accordion-inner">
<p>Combine <code>#queryfilter</code> to narrow by category, <code>#querysortvalue</code> to sort by date descending, and <code>maxResults(10)</code> to take only the top 10.</p>
<pre><code>#set ($query = $_.query().byContentType("Article").preloadStructuredData().sortDirection("desc").maxResults(10))

#queryfilter($query, $asset)
  $asset.metadata.title.contains("Science")
#end

#querysortvalue($query, $asset)
  #set ($dt = $asset.getStructuredDataNode("event-date").textValue)
  #if($_PropertyTool.isNotEmpty($dt))
    #set ($date = $_DateTool.toDate("MM-dd-yyyy hh:mm:ss a", $dt))
    ${date.getTime()}
  #else
    0
  #end
#end

#queryexecute($query, $page)
  &lt;li&gt;${page.metadata.title}&lt;/li&gt;
#end</code></pre>
</div>
</details> <details class="accordion"> <summary>Three-field filter with two-field sort</summary>
<div class="accordion-inner">
<p>Filter on three conditions (dynamic metadata + standard metadata), then sort by two concatenated fields.</p>
<pre><code>#set ($query = $_.query().byContentType("Article").preloadStructuredData().preloadDynamicMetadata().sortDirection("asc").maxResults(25))

#queryfilter($query, $asset)
  #set($result = $asset.metadata.getDynamicField("checkbox").value.contains("Fast") &amp;&amp; $asset.metadata.getDynamicField("noindex").value.contains("No") &amp;&amp; $_PropertyTool.isNotEmpty($asset.metadata.summary))
  $result
#end

#querysortvalue($query, $asset)
  $asset.metadata.getDynamicField("department").value $asset.metadata.author
#end

#queryexecute($query, $page)
  &lt;li&gt;
    ${page.metadata.getDynamicField("department").value} &amp;mdash;
    ${page.metadata.author} &amp;mdash;
    ${page.metadata.title}
  &lt;/li&gt;
#end</code></pre>
</div>
</details> <details class="accordion"> <summary>Group results under dynamic headers</summary>
<div class="accordion-inner">
<p>Sort by the grouping field so identical values are adjacent, then detect when the value changes to insert a header.</p>
<pre><code>#set ($query = $_.query().byContentType("Article").preloadDynamicMetadata().sortDirection("asc").maxResults(50))

#querysortvalue($query, $asset)
  $asset.metadata.getDynamicField("department").value $asset.metadata.title
#end

#set ($currentGroup = "")
#queryexecute($query, $page)
  #set ($group = $page.metadata.getDynamicField("department").value)
  #if($group != $currentGroup)
    &lt;h3&gt;$group&lt;/h3&gt;
    #set ($currentGroup = $group)
  #end
  &lt;li&gt;${page.metadata.title}&lt;/li&gt;
#end</code></pre>
</div>
</details>
<h3>Advanced patterns</h3>
<details class="accordion"> <summary>Aggregate counts by field value</summary>
<div class="accordion-inner">
<p>Use a map to count how many pages have each value in a field. Arithmetic (<code>+</code>) only works inside <code>#set</code> directives, not inside method arguments like <code>.put()</code>.</p>
<pre><code>#set ($query = $_.query().byContentType("Article").preloadDynamicMetadata().maxResults(-1))
#set ($counts = {"Yes": 0, "No": 0, "Maybe": 0})

#queryexecute($query, $page)
  #set ($val = $page.metadata.getDynamicField("radio").value)
  #if($val.contains("Yes"))
    #set ($n = $counts.get("Yes") + 1)
    #set ($dummy = $counts.put("Yes", $n))
  #elseif($val.contains("No"))
    #set ($n = $counts.get("No") + 1)
    #set ($dummy = $counts.put("No", $n))
  #elseif($val.contains("Maybe"))
    #set ($n = $counts.get("Maybe") + 1)
    #set ($dummy = $counts.put("Maybe", $n))
  #end
#end
Yes: $counts.get("Yes"), No: $counts.get("No"), Maybe: $counts.get("Maybe")</code></pre>
</div>
</details> <details class="accordion"> <summary>Parse, sort, and format dates for display</summary>
<div class="accordion-inner">
<p>Filter to pages with a date, sort chronologically using epoch milliseconds, then format the date for readable output with <code>$_DateTool.format()</code>.</p>
<pre><code>#set ($query = $_.query().byContentType("Event").preloadStructuredData().sortDirection("desc").maxResults(15))

#queryfilter($query, $asset)
  $_PropertyTool.isNotEmpty($asset.getStructuredDataNode("event-date").textValue)
#end

#querysortvalue($query, $asset)
  #set ($dt = $asset.getStructuredDataNode("event-date").textValue)
  #set ($date = $_DateTool.toDate("MM-dd-yyyy hh:mm:ss a", $dt))
  ${date.getTime()}
#end

#queryexecute($query, $event)
  #set ($dt = $event.getStructuredDataNode("event-date").textValue)
  #set ($date = $_DateTool.toDate("MM-dd-yyyy hh:mm:ss a", $dt))
  #set ($formatted = $_DateTool.format("MMMM d, yyyy", $date))
  &lt;li&gt;
    &lt;strong&gt;${event.metadata.title}&lt;/strong&gt;
    &lt;span&gt;$formatted&lt;/span&gt;
  &lt;/li&gt;
#end</code></pre>
</div>
</details> <details class="accordion"> <summary>Count pages per category using a map</summary>
<div class="accordion-inner">
<p>Define a map of categories with initial counts of zero. Iterate all pages, check each category, and increment the count. Output the breakdown with <code>#foreach</code> on the map entries.</p>
<pre><code>#set ($query = $_.query().byContentType("Article").maxResults(-1))
#set ($cats = {"Technology": 0, "Science": 0, "Education": 0, "Healthcare": 0, "Business": 0})

#queryexecute($query, $page)
  #set ($t = $page.metadata.title)
  #foreach($cat in $cats.keySet())
    #if($t.contains($cat))
      #set ($n = $cats.get($cat) + 1)
      #set ($dummy = $cats.put($cat, $n))
    #end
  #end
#end

&lt;ul&gt;
#foreach($entry in $cats.entrySet())
  &lt;li&gt;$entry.key: $entry.value&lt;/li&gt;
#end
&lt;/ul&gt;</code></pre>
</div>
</details></section>
                                    </section>
                    
                                                
            <section aria-label="Migration guide" class="anchor-heading" id="Migrationguide">
                                        <h2>Migration guide     <a aria-label="Skip to Migration guide" href="#Migrationguide"><i class="fas fa-link icon-anchor-link"></i></a></h2>
                        <p>Converting an existing <code>.execute()</code> pattern to use directives is straightforward.</p>
<h3>Before: .execute() + #foreach</h3>
<pre><code>#set ($results = $_.query().byContentType("Article").maxResults(10).sortBy("startDate").sortDirection("desc").execute())

#foreach ($page in $results)
  &lt;h3&gt;$page.metadata.title&lt;/h3&gt;
  &lt;p&gt;$page.metadata.summary&lt;/p&gt;
#end</code></pre>
<h3>After: #queryexecute</h3>
<pre><code>#set ($query = $_.query().byContentType("Article").maxResults(10).sortBy("startDate").sortDirection("desc"))

#queryexecute($query, $page)
  &lt;h3&gt;$page.metadata.title&lt;/h3&gt;
  &lt;p&gt;$page.metadata.summary&lt;/p&gt;
#end</code></pre>
<p>Key changes:</p>
<ol>
<li>Remove <code>.execute()</code> from the query chain.</li>
<li>Replace <code>#foreach ($page in $results)</code> with <code>#queryexecute($query, $page)</code>.</li>
<li>The body stays the same.</li>
</ol>
<h3>Before: .execute() with manual filtering</h3>
<pre><code>#set ($list = $_.query().byContentType("News").preloadStructuredData().execute())

#foreach ($page in $list)
  #if ($page.getStructuredDataNode("details/is-featured").textValue.contains("Yes"))
    &lt;div&gt;$page.metadata.title&lt;/div&gt;
  #end
#end</code></pre>
<h3>After: #queryfilter + #queryexecute</h3>
<pre><code>#set ($query = $_.query().byContentType("News").preloadStructuredData())

#queryfilter($query, $asset)
  $asset.getStructuredDataNode("details/is-featured").textValue.contains("Yes")
#end

#queryexecute($query, $page)
  &lt;div&gt;$page.metadata.title&lt;/div&gt;
#end</code></pre>
<p>Key changes:</p>
<ol>
<li>Remove <code>.execute()</code> and the <code>#foreach</code>/<code>#if</code> block.</li>
<li>Move the condition into <code>#queryfilter</code>. The body must return the exact string <code>true</code>.</li>
<li>Use <code>#queryexecute</code> for the output, now with only matching results.</li>
</ol>
<div class="alert alert-success"><strong>Tip</strong>: With <code>#queryfilter</code>, the filtering happens <em>before</em> <code>maxResults()</code> is applied. This means you get the correct number of matching results, rather than filtering down from a potentially truncated list.</div>
                                    </section>
                                     <a aria-label="Back to top" class="scroll-container" href="#top">
        <span class="scroll-container__icon">↑</span>
    </a>
  
        </div>
            
    <script>
      function toggleWidthAndIcon() {
        var element = document.getElementById("expand");
        var icon = document.getElementById("iconToggle");
    
        // Check if the content is currently full width
        if (element.classList.contains("width-full")) {
          // If yes, switch to "width" and update the icon to "expand"
          element.classList.remove("width-full");
          element.classList.add("width");
          icon.classList.remove('fa-down-left-and-up-right-to-center');
          icon.classList.add('fa-up-right-and-down-left-from-center');
        } else {
          // If not, switch to "width-full" and update the icon to "un-expand"
          element.classList.remove("width");
          element.classList.add("width-full");
          icon.classList.remove('fa-up-right-and-down-left-from-center');
          icon.classList.add('fa-down-left-and-up-right-to-center');
        }
      }
    </script>
    
						
					</main>
				</div>
			</div>
			<footer>
				<div class="footer-wrapper ">
    <div class="cludo-feedback"></div> 
<hr/>
<div class="footer-container">
    <div class="footer-left">
        <img alt="cascade cms icon" class="footer-logo" src="https://www.hannonhill.com/cascadecms/latest/_files/images/apple-touch-icon-57x57.png"/>
        
                <p class="" id="site-copyright">All content <a aria-hidden="true" class="quickedit" href="https://hannonhill.cascadecms.com/entity/open.act?id=6cec5ca0c0a8002b2ab64e2df52d0fc0&amp;type=page" tabindex="-1" target="_blank">©</a> 2026 <a href="https://www.hannonhill.com/index.html">Hannon Hill</a></p>
        
        
    </div>
    <div class="footer-right">
         <ul>
            <li><a href="https://www.hannonhill.com/about-us/about-hannon-hill.html">About us</a></li>
            <li><a href="https://www.hannonhill.com/about-us/join-our-team/index.html">Careers</a></li>
            <li><a href="https://www.hannonhill.com/documents/index.html">Compliance</a></li>
            <li><a href="https://www.hannonhill.com/resources/index.html">Resources</a></li>
            <li><a href="https://portal.productboard.com/gp4tteft4txh4nde2tnnnybl">Idea Portal</a></li>
            <li><a href="https://www.hannonhill.com/cascadecms/latest/sitemap.html">Site Index</a></li>
            <li><a href="https://github.com/hannonhill">Github</a></li>
        </ul>
    </div>
</div>
</div>
			</footer>
		</div>
		
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"></script>
<script src="https://www.hannonhill.com/cascadecms/latest/_files/_redesign/lib/bootstrap/bootstrap.min.js"></script>
<script src="https://www.hannonhill.com/cascadecms/latest/_files/_redesign/lib/bootstrap/scrollspy.js"></script>
<script src="https://www.hannonhill.com/cascadecms/latest/_files/_redesign/application.js"></script>
<script src="https://www.hannonhill.com/cascadecms/latest/_files/_redesign/prism/prism.js" type="text/javascript"></script>
<script src="https://customer.cludo.com/scripts/bundles/search-script.min.js" type="text/javascript"></script>
<script>
var CludoSearch;
(function () {
    var cludoSettings = {
        customerId: 10001479,
        engineId: 10002755,
        searchUrl: 'https://www.hannonhill.com/cascadecms/latest/search.html',
        language: 'en',
        searchInputs: ['cludo-search-form', 'cludo-search-form-top'],
        hideSearchFilters: true,
        focusOnResultsAfterSearch: true,
        type: 'inline',
        template: 'InlineBasic',
        disableAutocomplete: true,
        <!--enableVoiceSearch: true-->
    };
    CludoSearch = new Cludo(cludoSettings);
    CludoSearch.init();
})();
</script>
<!--Cludo Experiences-->
<script data-cid="10001479" defer="defer" id="cludo-experience-manager" src="https://customer.cludo.com/scripts/bundles/experiences/manager.js"></script>
<!--[if lte IE 9]>
    <script src="https://api.cludo.com/scripts/xdomain.js" slave="https://api.cludo.com/proxy.html" type="text/javascript"></script>
<![endif]-->


		
		
<script type="text/javascript">
    piAId = '1002';
    piCId = '1003';
    
    (function() {
        function async_load(){
            var s = document.createElement('script'); s.type = 'text/javascript';
            s.src = ('https:' == document.location.protocol ? 'https://pi' : 'http://cdn') + '.pardot.com/pd.js';
            var c = document.getElementsByTagName('script')[0]; c.parentNode.insertBefore(s, c);
        }
        if(window.attachEvent) { window.attachEvent('onload', async_load); }
        else { window.addEventListener('load', async_load, false); }
    })();
</script>
<script type="text/javascript">
  sAId = "1";
  sCId = "4";

  (function() {
    function async_load(){
      var s = document.createElement('script'); s.type = 'text/javascript';
      s.src = (('https:' == document.location.protocol) ? "https://ssl" : "http://cdn") + ".spectate.com/s.js";
      var c = document.getElementsByTagName('script')[0]; c.parentNode.insertBefore(s, c);
    }
    if(window.attachEvent) { window.attachEvent('onload', async_load); }
    else { window.addEventListener('load', async_load, false); }
  })();
</script>


	    <script async="true" src="https://live.clive.cloud/page-views/track/12"></script>
		
	</body>
</html>