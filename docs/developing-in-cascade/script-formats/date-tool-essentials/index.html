<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Date Tool Essentials - Cascade CMS Knowledge Base</title>
  <meta name="description" content="The Date Tool lets you retrieve, parse, format, and compare date/time values in Velocity. It is especially useful when you are working with Unix timestamps in milliseconds (such as">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;700&display=swap" rel="stylesheet">
  <script>
  (function () {
    var pref = localStorage.getItem('theme-preference');
    var theme;
    if (pref === 'dark') { theme = 'dark'; }
    else if (pref === 'light') { theme = 'light'; }
    else { theme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'; }
    document.documentElement.setAttribute('data-theme', theme);
  })();
  </script>
  <link rel="stylesheet" href="../../../../_assets/css/tokens.css">
  <link rel="stylesheet" href="../../../../_assets/css/reset.css">
  <link rel="stylesheet" href="../../../../_assets/css/layout.css">
  <link rel="stylesheet" href="../../../../_assets/css/typography.css">
  <link rel="stylesheet" href="../../../../_assets/css/components/sidebar.css">
  <link rel="stylesheet" href="../../../../_assets/css/components/toc.css">
  <link rel="stylesheet" href="../../../../_assets/css/components/breadcrumb.css">
  <link rel="stylesheet" href="../../../../_assets/css/components/code-block.css">
  <link rel="stylesheet" href="../../../../_assets/css/components/callout.css">
  <link rel="stylesheet" href="../../../../_assets/css/components/accordion.css">
  <link rel="stylesheet" href="../../../../_assets/css/components/steps.css">
  <link rel="stylesheet" href="../../../../_assets/css/components/tabs.css">
  <link rel="stylesheet" href="../../../../_assets/css/components/table.css">
  <link rel="stylesheet" href="../../../../_assets/css/components/search.css">
  <link rel="stylesheet" href="../../../../_assets/css/components/theme-toggle.css">
  <link rel="stylesheet" href="../../../../_assets/css/components/cards.css">
  <link rel="stylesheet" href="../../../../_assets/css/components/footer.css">
  <link rel="stylesheet" href="../../../../_assets/css/components/buttons.css">
  <link rel="stylesheet" href="../../../../_assets/css/components/badges.css">
  <link rel="stylesheet" href="../../../../_assets/css/components/tooltip.css">
  <link rel="stylesheet" href="../../../../_assets/css/utilities.css">
  <link rel="stylesheet" href="../../../../_assets/css/print.css" media="print">
  <link rel="stylesheet" href="../../../../_assets/vendor/prism/prism-theme.css">
</head>
<body>
  <a href="#main-content" class="skip-link">Skip to main content</a>
  <header class="header" role="banner">
    <div class="header__left">
      <button class="header__menu-toggle" aria-label="Toggle navigation" aria-expanded="false">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
      </button>
      <a href="../../.././" class="header__logo"><span style="color: var(--color-primary-vivid); font-weight: 700;">Cascade</span>&nbsp;CMS Docs</a>
    </div>
    <nav class="header__nav" aria-label="Top navigation">
      <a href="#" class="header__nav-link header__nav-link--active">Knowledge Base</a>
      <a href="#" class="header__nav-link">Release Notes</a>
      <a href="#" class="header__nav-link">Support</a>
    </nav>
    <div class="header__right">
      <button class="header__search-trigger" aria-label="Search documentation">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
        <span class="header__search-text">Search...</span>
        <kbd class="header__search-kbd">âŒ˜K</kbd>
      </button>
      <div class="theme-toggle">
        <button class="theme-toggle__button" aria-label="Toggle color theme" aria-expanded="false" aria-haspopup="true">
          <svg class="theme-toggle__icon theme-toggle__icon--light" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
          <svg class="theme-toggle__icon theme-toggle__icon--dark" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
          <svg class="theme-toggle__icon theme-toggle__icon--system" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect><line x1="8" y1="21" x2="16" y2="21"></line><line x1="12" y1="17" x2="12" y2="21"></line></svg>
        </button>
        <div class="theme-toggle__dropdown" role="menu" hidden>
          <button class="theme-toggle__option" role="menuitem" data-theme="light">Light</button>
          <button class="theme-toggle__option" role="menuitem" data-theme="dark">Dark</button>
          <button class="theme-toggle__option theme-toggle__option--active" role="menuitem" data-theme="system">System</button>
        </div>
      </div>
    </div>
  </header>

  <div class="sidebar-overlay"></div>
  <div class="docs-layout">
    <aside class="sidebar" aria-label="Documentation navigation">
      <nav class="sidebar__nav">
        <div class="sidebar__section">
  <button class="sidebar__category" aria-expanded="true">
    Developing In Cascade
    <svg class="sidebar__chevron" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>
  </button>
  <ul class="sidebar__pages">
    <li><a href="../../" class="sidebar__link">Developing In Cascade Overview</a></li>
<li><a href="../velocity-best-practices/" class="sidebar__link">Best practices for performance</a></li>
<li><a href="./" class="sidebar__link sidebar__link--active" aria-current="page">Date Tool Essentials</a></li>
<li><a href="../query-tool-directives/" class="sidebar__link">Query Tool Directives</a></li>
  </ul>
</div>
      </nav>
    </aside>

    <main id="main-content" class="main">
      <article class="content">
        <nav class="breadcrumb" aria-label="Breadcrumb">
  <ol class="breadcrumb__list">
    <li class="breadcrumb__item"><a href="../../.././" class="breadcrumb__link">Home</a></li>
    <li class="breadcrumb__item"><a href="../../" class="breadcrumb__link">Developing In Cascade</a></li>
    <li class="breadcrumb__item breadcrumb__item--current" aria-current="page">Date Tool Essentials</li>
  </ol>
</nav>
        <header class="content__header">
          <span class="content__category-label">Developing In Cascade</span>
          <h1 class="content__title">Date Tool Essentials</h1>
        </header>
        <div class="content__body">
          <h2 id="developing-in-cascade-script-formats-date-tool-essentials-section-1">Overview</h2>
<p>The Date Tool lets you retrieve, parse, format, and compare date/time values in Velocity. It is especially useful when you are working with Unix timestamps in milliseconds (such as Index Block XML values), normalizing mixed time zones from feeds, or formatting human-readable dates for display.</p>
<p>Convert Unix timestamps in milliseconds to Java Dates. Parse formatted strings into Dates with toDate(). Format Dates for display with format(). Compare two dates using difference().</p>

<h2 id="developing-in-cascade-script-formats-date-tool-essentials-section-2">.getDate() vs .toDate()</h2>
<p>Use .getDate() when you already have a Unix timestamp in milliseconds (for example, from metadata like $currentPage.metadata.startDate) and need a Java Date for formatting or comparison. If you omit the argument, getDate() returns the current moment. If your input is a human-readable date string (like 03-21-2024), use .toDate() instead. The pattern you pass must match the string exactly; if it does not, you will get null rather than a parsed date. A quick rule: numeric Unix timestamps go to getDate(), formatted strings go to toDate(). Keep your patterns consistent so your parsing and display stay in sync. These two are easy to mix up: getDate() expects (or defaults to) a numeric timestamp and hands you back a Date object, while toDate() converts a string to a Date object by matching the syntax in the string with your pattern. Quick compare: getDate vs toDate.</p>
<p>Method Input When to use</p>
<p>$_DateTool.getDate() Unix timestamp in milliseconds Convert a numeric timestamp to a Date for formatting or comparison.</p>
<p>$_DateTool.toDate() Formatted date string + pattern Parse a human-readable date string into a Date.</p>
<p>Pitfall - getDate() expects milliseconds. If you pass seconds, your date will land near 1970. .getDate examples Many $currentPage properties already return Date objects, so you can format them directly without conversion: ## These already return Date objects - no conversion needed $currentPage.lastPublishedOn ## Date of last publish $currentPage.createdOn ## Date asset was created $currentPage.lastModified ## Date of last modification</p>
<p>## Get the current date/time $_DateTool.getDate() Format these dates directly: ## Format the last published date for a byline Published $_DateTool.format(&quot;MMM d, yyyy&quot;, $currentPage.lastPublishedOn) ## Output: Published Jan 15, 2026</p>
<p>## Format creation date Created $_DateTool.format(&quot;MMMM d, yyyy&quot;, $currentPage.createdOn) ## Output: Created January 10, 2026 Data Definition date/time fields store timestamps as strings, so you need to convert them with getDate() before formatting: ## Format a date/time field from a Data Definition #set ($dateNode = $currentPage.getStructuredDataNode(&quot;date-time&quot;).textValue)#set ($eventDate = $_DateTool.getDate($dateNode))$_DateTool.format(&quot;MMMM d, yyyy&quot;, $eventDate) ## Output: March 15, 2026 .toDate examples Use toDate() when you have a date as a string and need to parse it into a Date object: ## Parse a date string - pattern must match the input format exactly #set ($dateString = &quot;03-21-2024&quot;) #set ($date = $_DateTool.toDate(&quot;MM-dd-yyyy&quot;, $dateString)) $_DateTool.format(&quot;MMMM d, yyyy&quot;, $date) ## Output: March 21, 2024 ## ISO-style date format (common in feeds and APIs) #set ($shipDateString = &quot;2024-07-05&quot;) #set ($shipDate = $_DateTool.toDate(&quot;yyyy-MM-dd&quot;, $shipDateString)) $_DateTool.format(&quot;MMM d, yyyy&quot;, $shipDate) ## Output: Jul 5, 2024 ## Date with time - useful for event timestamps #set ($stamp = &quot;2024-07-05 14:30:00&quot;) #set ($stampDate = $_DateTool.toDate(&quot;yyyy-MM-dd HH:mm:ss&quot;, $stamp)) $_DateTool.format(&quot;EEEE, MMM d &#39;at&#39; h:mma&quot;, $stampDate) ## Output: Friday, Jul 5 at 2:30PM Real-world scenarios Event listing with metadata dates: ## Display event start date from page metadata #set ($startMillis = $currentPage.metadata.startDate) #if ($startMillis &amp;&amp; $startMillis &gt; 0) #set ($eventDate = $_DateTool.getDate($startMillis)) &lt;time datetime=&quot;$_DateTool.format(&#39;yyyy-MM-dd&#39;, $eventDate)&quot;&gt; $_DateTool.format(&quot;MMMM d, yyyy&quot;, $eventDate) &lt;/time&gt; #end News article with published date: ## Format last published date for byline #set ($pubDate = $_DateTool.getDate($currentPage.lastPublishedOn)) Published $_DateTool.format(&quot;MMM d, yyyy&quot;, $pubDate) Working with Index Blocks Processing dates from Index Block XML: ## Index Block provides timestamps in milliseconds #foreach ($page in $_XPathTool.selectNodes($contentRoot, &quot;//system-page&quot;)) #set ($lastMod = $_XPathTool.selectSingleNode($page, &quot;last-modified-on&quot;)) #set ($lastModDate = $_DateTool.getDate($lastMod.value))</p>
<p>&lt;li&gt; $_XPathTool.selectSingleNode($page, &quot;title&quot;).value - Updated $_DateTool.format(&quot;M/d/yy&quot;, $lastModDate) &lt;/li&gt; #end Filtering Index Block results by date: ## Show only items modified in the last 30 days #set ($now = $_DateTool.getDate()) #foreach ($page in $_XPathTool.selectNodes($contentRoot, &quot;//system-page&quot;)) #set ($lastModMillis = $_XPathTool.selectSingleNode($page, &quot;last-modified-on&quot;).value) #set ($lastModDate = $_DateTool.getDate($lastModMillis)) #set ($diff = $_DateTool.difference($lastModDate, $now))</p>
<p>#if ($diff.days &lt;= 30) ## Display this item #end #end Handling edge cases Null-safe date handling: ## Always check for null before formatting #set ($startMillis = $currentPage.metadata.startDate) #if ($startMillis &amp;&amp; $startMillis &gt; 0) #set ($startDate = $_DateTool.getDate($startMillis)) $_DateTool.format(&quot;MMMM d, yyyy&quot;, $startDate) #else Date not set #end Pattern mismatch returns null: ## toDate returns null if pattern doesn&#39;t match input #set ($input = &quot;March 15, 2024&quot;) #set ($wrongPattern = $_DateTool.toDate(&quot;MM-dd-yyyy&quot;, $input)) ## null #set ($rightPattern = $_DateTool.toDate(&quot;MMMM d, yyyy&quot;, $input)) ## works</p>
<p>#if (!$rightPattern) Could not parse date #end Empty string handling: ## Empty strings also return null #set ($emptyDate = &quot;&quot;) #set ($parsed = $_DateTool.toDate(&quot;yyyy-MM-dd&quot;, $emptyDate))</p>
<p>#if (!$parsed) No date provided #end</p>

<h2 id="developing-in-cascade-script-formats-date-tool-essentials-section-3">Using difference()</h2>
<p>difference() returns a Comparison object that describes the distance between two dates. When printed, it renders a human-readable value (like 5 months), and it also includes structured fields like days, months, relative, and full. Parsing dates for comparison Most real-world use starts by converting a string into a Date. Keep the format string aligned with your input (this is the part that usually breaks). #set ($today = $_DateTool.getDate())</p>
<p>## Example input: &quot;07-04-26&quot; (MM-dd-yy) #set ($manualDate = &quot;07-04-26&quot;) #set ($targetDate = $_DateTool.toDate(&quot;MM-dd-yy&quot;, $manualDate))</p>
<p>$today ## Wed Jan 14 14:36:28 EST 2026 $targetDate ## Sat Jul 04 00:00:00 EDT 2026 Basic example: distance between two dates Use difference(dateA, dateB) when you want the distance between two dates. This is best for countdowns, &amp;#8220;time since&amp;#8221; labels, or comparisons used in logic. #set ($today = $_DateTool.getDate()) #set ($manualDate = &quot;07-04-26&quot;) #set ($targetDate = $_DateTool.toDate(&quot;MM-dd-yy&quot;, $manualDate))</p>
<p>## Compare today to the target date #set ($difference = $_DateTool.difference($today, $targetDate))</p>
<p>$today ## Wed Jan 14 14:36:28 EST 2026 $targetDate ## Sat Jul 04 00:00:00 EDT 2026 $difference ## 5 months Useful fields on the Comparison object The returned object is more than just a string. These are the fields you&amp;#8217;ll actually use in templates and UI labels: $difference.abbr ## 5 mos $difference.difference ## 5 months $difference.relative ## 5 months later $difference.full ## 5 months 2 weeks 6 days 8 hours 23 minutes ...</p>
<p>$difference.days ## 170 $difference.weeks ## 24 $difference.months ## 5 $difference.years ## 0</p>
<p>$difference.class ## class org.apache.velocity.tools.generic.ComparisonDateTool$Comparison Branching UI label: &amp;#8220;Still coming up&amp;#8221; vs &amp;#8220;Happened&amp;#8221; For simple branching logic, days is the easiest field to work with. Just be consistent about argument order. In the example below, a positive number means the target date is in the future (relative to today). #set ($today = $_DateTool.getDate()) #set ($manualDate = &quot;07-04-26&quot;) #set ($targetDate = $_DateTool.toDate(&quot;MM-dd-yy&quot;, $manualDate)) #set ($difference = $_DateTool.difference($today, $targetDate))</p>
<p>#if ($difference.days &gt;= 0) Still coming up (in $difference.abbr) #else Happened ($difference.abbr ago) #end Tip: For &amp;#8220;ago&amp;#8221; labels, you can also use $difference.abs() if you want a cleaner positive duration (example: 5 months instead of -5 months).</p>

<h2 id="developing-in-cascade-script-formats-date-tool-essentials-section-4">whenIs() basics</h2>
<p>whenIs() answers the more human question: &amp;#8220;When is A relative to B?&amp;#8221; It also returns a Comparison object, but the output is naturally directional (earlier / later), which is great for client-facing labels. No-arg usage: &amp;#8220;now&amp;#8221; ## today is January 13, 2026 in this example #set ($today = $_DateTool.getDate())</p>
<p>#set ($whenIs = $_DateTool.whenIs($today)) $whenIs ## now Comparing two dates (both directions) Argument order matters. Swapping them flips earlier vs later. #set ($today = $_DateTool.getDate())</p>
<p>#set ($manualDate = &quot;July 4, 2026&quot;) #set ($targetDate = $_DateTool.toDate(&quot;MMMM dd, yyyy&quot;, $manualDate))</p>
<p>$targetDate ## Sat Jul 04 00:00:00 EDT 2026</p>
<p>## Target compared to today #set ($whenIsA = $_DateTool.whenIs($targetDate, $today)) $whenIsA ## 5 months earlier</p>
<p>## Today compared to target #set ($whenIsB = $_DateTool.whenIs($today, $targetDate)) $whenIsB ## 5 months later Useful fields (same Comparison object) Same object structure as difference(), but the human strings are usually what you want to show clients (relative, abbr, full). $whenIsB.abbr ## 5 mos later $whenIsB.relative ## 5 months later $whenIsB.difference ## 5 months $whenIsB.full ## 5 months 3 weeks 7 hours ... later</p>
<p>$whenIsB.days ## 171 $whenIsB.months ## 5 $whenIsB.years ## 0</p>
<p>$whenIsB.class ## class org.apache.velocity.tools.generic.ComparisonDateTool$Comparison Branching UI label: &amp;#8220;didn&amp;#8217;t happen yet&amp;#8221; vs &amp;#8220;you missed it&amp;#8221; This is a clean pattern for client-friendly messaging. Just decide what &amp;#8220;positive&amp;#8221; means for your argument order and stick to it. #set ($today = $_DateTool.getDate()) #set ($manualDate = &quot;July 4, 2026&quot;) #set ($targetDate = $_DateTool.toDate(&quot;MMMM dd, yyyy&quot;, $manualDate))</p>
<p>## &quot;today relative to target&quot; #set ($whenIs = $_DateTool.whenIs($today, $targetDate))</p>
<p>#if ($whenIs.days &gt; 0) Didn&#39;t happen yet ($whenIs.abbr) #else You missed it ($whenIs.abbr) #end</p>

<h2 id="developing-in-cascade-script-formats-date-tool-essentials-section-5">getCalendar basics</h2>
<p>getCalendar() returns a Java Calendar object representing the current date and time in Cascade&amp;#8217;s configured time zone. Use it when you need to read specific parts of &amp;#8220;now&amp;#8221; (year, month, day, weekday, hour) as numeric values for logic. #set ($cal = $_DateTool.getCalendar())</p>
<p>## Calendar field IDs (numbers) are used by: ## $cal.get(fieldId)</p>
<p>$cal.get(1) ## YEAR ## Example output: 2026</p>
<p>$cal.get(2) ## MONTH (zero-based: January = 0) ## Example output: 0</p>
<p>$cal.get(5) ## DAY_OF_MONTH ## Example output: 15</p>
<p>$cal.get(7) ## DAY_OF_WEEK (Sunday = 1 ... Saturday = 7) ## Example output: 5</p>
<p>$cal.get(11) ## HOUR_OF_DAY (0&amp;#8211;23) ## Example output: 15 These numeric field IDs are standard Java Calendar constants. You&amp;#8217;ll typically only need a small subset of them when working with getCalendar().</p>
<p>Field ID Meaning Notes</p>
<p>1 YEAR 4-digit year</p>
<p>2 MONTH Zero-based: January = 0</p>
<p>5 DAY_OF_MONTH 1&amp;#8211;31</p>
<p>6 DAY_OF_YEAR 1&amp;#8211;365/366</p>
<p>7 DAY_OF_WEEK Sunday = 1, Saturday = 7</p>
<p>9 AM_PM 0 = AM, 1 = PM</p>
<p>11 HOUR_OF_DAY 24-hour clock (0&amp;#8211;23)</p>
<p>12 MINUTE 0&amp;#8211;59</p>
<p>Important: getCalendar() is best treated as a read-only helper in Cascade. For date math or comparisons, use difference() or whenIs(). For formatting, use format().</p>

<h2 id="developing-in-cascade-script-formats-date-tool-essentials-section-6">Formatting output</h2>
<p>Keep your output consistent by reusing a small set of format strings. Popular options include:</p>
<p>MMMM d, yyyy MMM d, yyyy yyyy-MM-dd yyyyMMdd EEEE, MMMM d, yyyy &#39;at&#39; h:mma</p>
<p>yyyy-MM-dd&#39;T&#39;HH:mm:ssXXX (ISO 8601 with offset) HH:mm (24-hour) and h:mma (12-hour) &#39;Week&#39; w, yyyy (week number)</p>
<p>Common symbols: Common date format symbols</p>
<p>Symbol Meaning Variations / examples</p>
<p>y Year y=2024 yy=24 yyyy=2024</p>
<p>M Month (1-12) M=8 MM=08 MMM=Aug MMMM=August</p>
<p>d Day of month d=5 dd=05</p>
<p>E Day name E=Wed EEE=Wed EEEE=Wednesday</p>
<p>H Hour 0-23 H=9 HH=09</p>
<p>h Hour 1-12 h=9 hh=09</p>
<p>m Minute m=3 mm=03</p>
<p>s Second s=7 ss=07</p>
<p>a AM/PM marker a=AM</p>
<p>z Time zone abbreviation z=EDT zzzz=Eastern Daylight Time</p>
<p>X ISO 8601 offset X=-5 XX=-0500 XXX=-05:00</p>
<p>w Week of year w=34 ww=34</p>
<p>Practical examples using the same timestamp: #set ($stamp = &quot;2024-08-21 13:45:00&quot;) #set ($date = $_DateTool.toDate(&quot;yyyy-MM-dd HH:mm:ss&quot;, $stamp))</p>
<p>$_DateTool.format(&quot;MMMM d, yyyy&quot;, $date) ## August 21, 2024</p>
<p>$_DateTool.format(&quot;EEE, MMM d &#39;at&#39; h:mma&quot;, $date) ## Wed, Aug 21 at 1:45PM</p>
<p>$_DateTool.format(&quot;z&quot;, $date) ## EDT$_DateTool.format(&quot;zzzz&quot;, $date)## Eastern Daylight Time</p>

<h2 id="developing-in-cascade-script-formats-date-tool-essentials-section-7">Handling time zones</h2>
<p>Feeds frequently include timestamps paired with separate time zone identifiers (for example, 2024-08-21 13:00:00 with America/Chicago). If you format those dates using your server&#39;s default time zone, event times can appear hours off. To display the correct local time, you need to explicitly apply each event&#39;s time zone when formatting. In most cases (all Cascade Cloud environments and most on-prem environments), you can pass a time zone string directly to $_DateTool.getTimeZone().getTimeZone(): #set ($startDate = $currentPage.createdOn)</p>
<p>## Default server time zone $_DateTool.format(&#39;EE MMM dd HH:mm:ss z yyyy&#39;, $startDate) ## Output: Wed Aug 21 14:08:26 EDT 2019</p>
<p>## Converted to UTC $_DateTool.format(&#39;EE MMM dd HH:mm:ss z yyyy&#39;, $startDate, $_DateTool.getLocale(), $_DateTool.getTimeZone().getTimeZone(&quot;UTC&quot;)) ## Output: Wed Aug 21 18:08:26 UTC 2019</p>
<p>## Converted to Pacific time $_DateTool.format(&#39;EE MMM dd HH:mm:ss z yyyy&#39;, $startDate, $_DateTool.getLocale(), $_DateTool.getTimeZone().getTimeZone(&quot;America/Los_Angeles&quot;)) ## Output: Wed Aug 21 11:08:26 PDT 2019 In some on-premise instances, this call may throw an exception like the following due to a missing JVM startup parameter:VelocityException: ASTMethod.execute() : exception invoking method &#39;getTimeZone&#39; in class sun.util.calendar.ZoneInfo You can verify whether your instance has this restriction by testing these two calls: ## This works on all instances - returns a ZoneInfo object $_DateTool.getTimeZone()</p>
<p>## This fails on some on-prem instances $_DateTool.getTimeZone().getTimeZone(&quot;UTC&quot;) If $_DateTool.getTimeZone().getTimeZone(&quot;UTC&quot;) fails with an error, see Troubleshooting: Zone Info for the fix. You can also consider the workaround listed in the following section (&quot;reflection&quot;). On-premises workaround (reflection) This approach uses Java reflection to access the TimeZone class directly. It can work in the event that you don&#39;t have the ability to add the JVM parameter as specified above. ## Get the TimeZone class via reflection #set ($tzClass = $_DateTool.getTimeZone().getClass().forName(&quot;java.util.TimeZone&quot;))</p>
<p>## Create a TimeZone object for UTC #set ($utcTz = $tzClass.getMethod(&quot;getTimeZone&quot;, $tzClass.forName(&quot;java.lang.String&quot;)).invoke(null, &quot;UTC&quot;))</p>
<p>## Format a date in UTC $_DateTool.format(&#39;EE MMM dd HH:mm:ss z yyyy&#39;, $currentPage.createdOn, $_DateTool.getLocale(), $utcTz) ## Output: Wed Aug 21 18:08:26 UTC 2019 Processing feeds with mixed time zones When processing a JSON feed where each event has its own time zone, use the reflection approach with a dynamic zone value: ## Assume feed fields: $event.start (yyyy-MM-dd HH:mm:ss), $event.timezone (e.g., America/Chicago)</p>
<p>## Set up the TimeZone class reference once #set ($tzClass = $_DateTool.getTimeZone().getClass().forName(&quot;java.util.TimeZone&quot;))</p>
<p>#foreach ($event in $events) ## Get the TimeZone for this event #set ($eventTz = $tzClass.getMethod(&quot;getTimeZone&quot;, $tzClass.forName(&quot;java.lang.String&quot;)).invoke(null, $event.timezone))</p>
<p>## Parse the date string #set ($parser = $_DateTool.getDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;, $_DateTool.getLocale(), $eventTz)) #set ($startDate = $parser.parse($event.start))</p>
<p>## Format with the event&#39;s time zone $_DateTool.format(&quot;MMM d, yyyy &#39;at&#39; h:mma z&quot;, $startDate, $_DateTool.getLocale(), $eventTz) ## Example output: Aug 21, 2024 at 1:00PM CDT #end Validating time zone IDs Time zone strings like America/Chicago or America/New_York must match Java&#39;s recognized identifiers. To see all valid IDs: #set ($tzClass = $_DateTool.getTimeZone().getClass().forName(&quot;java.util.TimeZone&quot;)) #set ($allIds = $tzClass.getMethod(&quot;getAvailableIDs&quot;, null).invoke(null, null)) $_ListTool.toList($allIds) This returns a list of all accepted time zone identifiers. As long as your feed&#39;s time zone values appear in this list, they will work with the examples above.</p>

<h2 id="developing-in-cascade-script-formats-date-tool-essentials-section-8">Sorting by date</h2>
<p>Once you have dates, you&#39;ll often need to sort content chronologically. Cascade offers a few approaches depending on your data source. Index Block sorting The simplest approach is to configure sorting directly in the Index Block asset. Under the block&#39;s settings, you can sort by system properties like Last Modified Date, Created Date, or Start Date (for pages with date metadata). This handles sorting before your Velocity code runs. Sorting with $_.query() The $_.query() tool lets you query assets directly in Velocity and sort the results by date fields. Use sortBy() to specify the field and sortDirection() for ascending or descending order. ## Query articles sorted by last modified date (newest first) #set ($results = $_.query().byContentType(&quot;Article&quot;).sortBy(&quot;modified&quot;).sortDirection(&quot;desc&quot;).execute())</p>
<p>#foreach ($page in $results) $page.name - $_DateTool.format(&quot;MMM d, yyyy&quot;, $page.lastModified) #end Available date fields for sortBy(): created, modified, startDate, endDate, and reviewDate. ## Sort events by start date (ascending) #set ($events = $_.query().byContentType(&quot;Event&quot;).sortBy(&quot;startDate&quot;).sortDirection(&quot;asc&quot;).execute()) Sorting with $_SortTool When you need to sort a collection in Velocity, use $_SortTool. This is useful when working with structured data or when you need custom sort logic. ## Sort a list of pages by lastModified (ascending) #set ($sorted = $_SortTool.sort($pages, &quot;lastModified&quot;))</p>
<p>## Sort descending (newest first) #set ($sorted = $_SortTool.sort($pages, &quot;lastModified:desc&quot;))</p>
<p>## Sort by a metadata date field #set ($sorted = $_SortTool.sort($pages, &quot;metadata.startDate:desc&quot;)) Sorting with XPath When processing Index Block XML, you can sort nodes directly in your XPath expression using sort-by. Date fields from Index Blocks are Unix timestamps in milliseconds, which sort numerically. ## Sort pages by last-modified-on, newest first #set ($pages = $_XPathTool.selectNodes( $contentRoot, &quot;//system-page[sort-by(last-modified-on, &#39;number&#39;, &#39;descending&#39;)]&quot; ))</p>
<p>#foreach ($page in $pages) #set ($lastMod = $_XPathTool.selectSingleNode($page, &quot;last-modified-on&quot;).value) #set ($date = $_DateTool.getDate($lastMod)) $_DateTool.format(&quot;MMM d, yyyy&quot;, $date) #end For metadata date fields stored as timestamps, use the same numeric sort: ## Sort by a dynamic metadata date field (e.g., event start date) #set ($events = $_XPathTool.selectNodes( $contentRoot, &quot;//system-page[sort-by(dynamic-metadata[name=&#39;start-date&#39;]/value, &#39;number&#39;, &#39;ascending&#39;)]&quot; ))</p>
        </div>
        <footer class="content__footer">
  <div class="content__meta">
    <span>Last updated: February 21, 2026</span>
  </div>
  <nav class="content__pagination">
    <span class="content__prev" aria-disabled="true"><span>Previous</span><span>None</span></span>
    <a href="../query-tool-directives/" class="content__next"><span>Next</span><span>Query Tool Directives</span></a>
  </nav>
</footer>
      </article>
    </main>

    <aside class="toc" aria-label="Table of contents">
      <div class="toc__sticky">
        <h2 class="toc__title">ON THIS PAGE</h2>
        <nav class="toc__nav"></nav>
      </div>
    </aside>

    <button class="toc-toggle" aria-label="Table of contents" aria-expanded="false">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg>
    </button>
  </div>

  <footer class="site-footer" role="contentinfo">
  <div class="site-footer__inner">
    <nav class="site-footer__primary" aria-label="Footer primary links">
      <a class="site-footer__primary-link" href="https://www.hannonhill.com/cascadecms/latest/">Documentation Home</a>
      <a class="site-footer__primary-link" href="https://www.hannonhill.com/cascadecms/latest/release-notes/index.html">Release Notes</a>
      <a class="site-footer__primary-link" href="https://support.hannonhill.com/">Support</a>
      <a class="site-footer__primary-link" href="https://www.hannonhill.com/cascadecms/latest/rss/index.html">RSS</a>
    </nav>
    <div class="site-footer__bottom">
      <p class="site-footer__copyright">All content &copy; 2026 Hannon Hill. All rights reserved.</p>
      <nav class="site-footer__links" aria-label="Footer links">
        <a class="site-footer__link" href="https://www.hannonhill.com/about-us">About Us</a>
        <a class="site-footer__link" href="https://www.hannonhill.com/careers">Careers</a>
        <a class="site-footer__link" href="https://www.hannonhill.com/compliance">Compliance</a>
        <a class="site-footer__link" href="https://www.hannonhill.com/resources">Resources</a>
        <a class="site-footer__link" href="https://hannonhill.ideas.aha.io/">Idea Portal</a>
        <a class="site-footer__link" href="https://www.hannonhill.com/site-index">Site Index</a>
        <a class="site-footer__link" href="https://github.com/hannonhill">Github</a>
        <a class="site-footer__link" href="https://www.hannonhill.com/accessibility-policy">Accessibility</a>
        <a class="site-footer__link" href="https://www.hannonhill.com/privacy-policy">Privacy Policy</a>
        <a class="site-footer__link" href="https://www.hannonhill.com/legal">Legal</a>
      </nav>
    </div>
  </div>
</footer>
  <div class="search-overlay" role="dialog" aria-modal="true" aria-label="Search documentation" data-search-index="../../../search-index.json" hidden>
    <div class="search-overlay__backdrop"></div>
    <div class="search-overlay__dialog">
      <div class="search-overlay__header">
        <svg class="search-overlay__icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
        <input type="search" class="search-overlay__input" placeholder="Search documentation..." autocomplete="off">
        <kbd class="search-overlay__shortcut">ESC</kbd>
      </div>
      <div class="search-overlay__results"><div class="search-overlay__empty">Start typing to search...</div></div>
      <div class="search-overlay__footer"><span>Navigate with <kbd>&uarr;</kbd><kbd>&darr;</kbd></span><span>Open with <kbd>&crarr;</kbd></span></div>
    </div>
  </div>

  <script src="../../../../_assets/vendor/prism/prism.min.js" defer></script>
  <script src="../../../../_assets/vendor/prism/prism-markup.min.js" defer></script>
  <script src="../../../../_assets/vendor/prism/prism-css.min.js" defer></script>
  <script src="../../../../_assets/vendor/prism/prism-javascript.min.js" defer></script>
  <script src="../../../../_assets/vendor/prism/prism-java.min.js" defer></script>
  <script src="../../../../_assets/vendor/prism/prism-python.min.js" defer></script>
  <script src="../../../../_assets/vendor/prism/prism-json.min.js" defer></script>
  <script src="../../../../_assets/vendor/prism/prism-bash.min.js" defer></script>
  <script src="../../../../_assets/vendor/prism/prism-yaml.min.js" defer></script>
  <script src="../../../../_assets/vendor/prism/prism-sql.min.js" defer></script>
  <script src="../../../../_assets/vendor/prism/prism-markup-templating.min.js" defer></script>
  <script src="../../../../_assets/vendor/prism/prism-velocity.min.js" defer></script>
  <script src="../../../../_assets/vendor/lunr/lunr.min.js" defer></script>
  <script src="../../../../_assets/js/theme.js" defer></script>
  <script src="../../../../_assets/js/sidebar.js" defer></script>
  <script src="../../../../_assets/js/toc.js" defer></script>
  <script src="../../../../_assets/js/tabs.js" defer></script>
  <script src="../../../../_assets/js/accordion.js" defer></script>
  <script src="../../../../_assets/js/code-block.js" defer></script>
  <script src="../../../../_assets/js/search.js" defer></script>
</body>
</html>