/* ==========================================================================
   Back to Top — Cascade CMS Knowledge Base
   Scroll-driven animation: fades in after user scrolls ~300px.
   Requires animation-timeline: scroll() (Chrome 115+, Firefox 110+, Safari 17.2+).
   On unsupported browsers the button never appears — graceful no-op.
   ========================================================================== */

@keyframes hh-back-to-top-reveal {
    from { opacity: 0; }
    to   { opacity: 1; }
}

.hh-back-to-top {
    position: fixed;
    bottom: var(--space-xl);
    right: calc(var(--toc-width) + var(--space-xs));
    z-index: calc(var(--z-toc-mobile) - 1);

    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    border-radius: 50%;

    background: var(--color-bg);
    border: 1px solid var(--color-border);
    box-shadow: var(--shadow-md);
    color: var(--color-text-secondary);

    opacity: 0;
    pointer-events: auto;

    animation: hh-back-to-top-reveal linear both;
    animation-timeline: scroll(root);
    animation-range: 300px 400px;

    transition: background var(--transition-fast), color var(--transition-fast),
        border-color var(--transition-fast), box-shadow var(--transition-fast),
        right var(--transition-fast);
}

.hh-back-to-top:hover {
    background: var(--color-bg-tertiary);
    color: var(--color-text);
    border-color: var(--color-primary);
    box-shadow: var(--shadow-lg);
}

.hh-back-to-top svg {
    flex-shrink: 0;
}

/* Narrow viewports: TOC column is hidden, sit at viewport edge */
@media (max-width: 1279px) {
    .hh-back-to-top {
        right: var(--space-sm);
    }
}

/* Reduced motion: disable animation; button is always hidden (graceful no-op) */
@media (prefers-reduced-motion: reduce) {
    .hh-back-to-top {
        animation: none;
        opacity: 0;
    }
}
